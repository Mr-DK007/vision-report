<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1320, initial-scale=1.0">
    <title>UI Testing - Vision Report</title>
    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64' viewBox='0 0 64 64'%3E%3Ccircle cx='32' cy='32' r='32' fill='%232786d4'/%3E%3Ctext x='32' y='32' text-anchor='middle' dominant-baseline='central' font-family='Arial,sans-serif' font-size='24' font-weight='bold' fill='white'%3EVR%3C/text%3E%3C/svg%3E">
        <style>
            :root{--header-height:60px;--sidebar-width:80px;--bg-color:#e6e7ee;--border-color:#d1d9e6;--text-color:#495057;--text-muted:#7b8ca0;--secondary-color-rgb:123,140,160;--primary-color:#2786d4;--primary-color-rgb:39,134,212;--accent-color:#9c27b0;--accent-color-rgb:156,39,176;--success-color:#4caf50;--success-color-rgb:76,175,80;--danger-color:#f44336;--danger-color-rgb:244,67,54;--warning-color:#ff9800;--warning-color-rgb:255,152,0;--info-color:#2196f3;--info-color-rgb:33,150,243;--status-success-color:#28a745;--status-error-color:#dc3545;--status-pending-color:#ffc107;--status-info-color:#17a2b8;--shadow-soft:2px 2px 4px #b8b9be,-2px -2px 4px #fff;--shadow-inset:inset 2px 2px 4px #b8b9be,inset -2px -2px 4px #fff;--font-family:Calibri,sans-serif;--transition-speed:.1s}
            [data-theme="dark"]{--bg-color:#2c3138;--border-color:#3c4653bd;--text-color:#e5ecf3;--text-muted:#98a4b8;--primary-color:#64b5f6;--accent-color:#ce93d8;--status-success-color:#4caf50;--status-error-color:#f44336;--status-pending-color:#ff9800;--status-info-color:#2196f3;--shadow-soft:2px 2px 4px #1a1e23,-2px -2px 4px #3e454d;--shadow-inset:inset 2px 2px 4px #1a1e23,inset -2px -2px 4px #3e454d}
            *{margin:0;padding:0;box-sizing:border-box;font-family:var(--font-family);text-rendering:optimizeLegibility!important;-webkit-font-smoothing:antialiased!important}
            svg{color:var(--text-color);width:14px;height:14px}
            .d-none{display:none!important}
            .d-block{display:block!important}
            .d-flex{display:flex!important}
            [data-tooltip]{position:relative;cursor:pointer;outline:none;display:inline-block}
            [data-tooltip]::after,[data-tooltip]::before{position:absolute;opacity:0;pointer-events:none;transition:opacity .3s ease-in-out;z-index:1000;transition-delay:.2s}
            [data-tooltip]::after{content:attr(data-tooltip);background:var(--text-muted);color:#fff;padding:4px 8px;border-radius:6px;white-space:nowrap;font-size:.8rem;max-width:calc(100vw - 20px)}
            [data-tooltip]::before{content:"";width:0;height:0;border-style:solid}
            [data-tooltip][data-placement="bottom"]::after{top:calc(100% + 12px);left:50%;transform:translateX(-50%)}
            [data-tooltip][data-placement="bottom"]::before{top:calc(100% + 6px);left:50%;transform:translateX(-50%);border-width:0 6px 6px;border-color:transparent transparent var(--text-muted)}
            [data-tooltip][data-placement="top"]::after{bottom:calc(100% + 12px);left:50%;transform:translateX(-50%)}
            [data-tooltip][data-placement="top"]::before{bottom:calc(100% + 6px);left:50%;transform:translateX(-50%);border-width:6px 6px 0;border-color:var(--text-muted) transparent transparent}
            [data-tooltip][data-placement="left"]::after{right:calc(100% + 12px);top:50%;transform:translateY(-50%)}
            [data-tooltip][data-placement="left"]::before{right:calc(100% + 6px);top:50%;transform:translateY(-50%);border-width:6px 0 6px 6px;border-color:transparent transparent transparent var(--text-muted)}
            [data-tooltip][data-placement="right"]::after{left:calc(100% + 12px);top:50%;transform:translateY(-50%)}
            [data-tooltip][data-placement="right"]::before{left:calc(100% + 6px);top:50%;transform:translateY(-50%);border-width:6px 6px 6px 0;border-color:transparent var(--text-muted) transparent transparent}
            [data-tooltip]:hover::after,[data-tooltip]:hover::before,[data-tooltip]:focus-visible::after,[data-tooltip]:focus-visible::before,[role="tooltip"]:hover::after,[role="tooltip"]:hover::before,[role="tooltip"]:focus-visible::after,[role="tooltip"]:focus-visible::before{opacity:1;z-index:1500}
            .scrollable{overflow:auto;scrollbar-width:thin;scrollbar-color:var(--text-muted) var(--bg-color)}
            .scrollable::-webkit-scrollbar{width:8px;height:8px}
            .scrollable::-webkit-scrollbar-track{background:var(--bg-color);border-radius:10px;box-shadow:var(--shadow-inset)}
            .scrollable::-webkit-scrollbar-thumb{background-color:var(--text-muted);border-radius:10px;box-shadow:var(--shadow-soft);cursor:pointer}
            .scrollable::-webkit-scrollbar-thumb:hover{background-color:var(--text-color)}
            .badge{display:inline-block;padding:.25em .6em;font-size:12px;line-height:1;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25rem;color:#fff;margin-right:.5rem;position:relative;cursor:pointer}
            .badge-primary{background-color:var(--primary-color)}
            .badge-secondary{background-color:var(--text-muted)}
            .badge-success{background-color:var(--success-color)}
            .badge-danger{background-color:var(--danger-color)}
            .badge-warning{background-color:var(--warning-color)}
            .badge-info{background-color:var(--info-color)}
            .page-header{height:var(--header-height);background-color:var(--bg-color);border-bottom:1px solid var(--border-color);position:fixed;top:0;left:0;right:0;display:flex;justify-content:space-between;align-items:center;padding:0 20px;z-index:100}
            .header-brand{display:flex;align-items:center;gap:12px}
            .brand-icon{width:40px;height:40px;display:flex;align-items:center;justify-content:center;background-color:var(--bg-color);border:1px solid var(--border-color);border-radius:8px;box-shadow:var(--shadow-soft)}
            .brand-icon svg{width:40px;height:40px}
            .header-actions{display:flex;gap:12px}
            .header-button{width:40px;height:40px;display:flex;align-items:center;justify-content:center;background-color:var(--bg-color);border:1px solid var(--border-color);border-radius:8px;box-shadow:var(--shadow-soft);cursor:pointer;position:relative}
            .header-button:hover{box-shadow:var(--shadow-inset)}
            .header-button svg{width:20px;height:20px;color:var(--text-color)}
            .theme-toggle .icon-moon{display:none;color:var(--text-color)}
            [data-theme="dark"] .theme-toggle .icon-sun{display:none}
            [data-theme="dark"] .theme-toggle .icon-moon{display:block;color:var(--text-color)}
            .theme-toggle:hover svg{transform:rotate(360deg);transition:transform 2s cubic-bezier(0.4,0,0.2,1)}
            .sidebar{width:var(--sidebar-width);height:100vh;position:fixed;top:var(--header-height);left:0;background-color:var(--bg-color);border-right:1px solid var(--border-color);display:flex;flex-direction:column;align-items:center;padding:12px 0;z-index:90}
            .nav-item{width:50px;height:48px;margin:10px 0;display:flex;align-items:center;justify-content:center;background-color:var(--bg-color);border:1px solid var(--border-color);border-radius:8px;box-shadow:var(--shadow-soft);cursor:pointer;position:relative}
            .nav-item:hover{box-shadow:var(--shadow-inset);color:var(--accent-color)}
            .nav-item.active{box-shadow:var(--shadow-inset);color:var(--primary-color)}
            .nav-item svg{width:20px;height:20px}
            .nav-item:hover svg{transform:scale(1.1)}
            .main-content{margin-left:var(--sidebar-width);margin-top:var(--header-height);min-height:calc(100vh - var(--header-height));transition:margin-left var(--transition-speed) ease}
            .content-section{display:none;background-color:var(--bg-color)}
            .content-section.active{display:block}
            .main-dashboard-layout{min-height:calc(100vh - var(--header-height));padding:32px 24px 20px;display:flex;flex-direction:column;background-color:var(--bg-color)}
            .dashboard-columns{display:flex;gap:20px;height:100%}
            .dashboard-col-left{flex:2 1 0;display:flex;flex-direction:column;gap:30px;min-width:0;padding-left:18px;padding-right:18px}
            .dashboard-col-right{flex:1 1 0;display:flex;flex-direction:column;gap:30px;min-width:320px;max-width:420px;padding-left:18px;padding-right:18px}
            .dashboard-logo-title-card{display:flex;align-items:center;gap:20px;background:var(--bg-color);border-radius:6px;box-shadow:var(--shadow-soft);border:1px solid var(--border-color);padding:10px 30px;min-width:320px;max-width:100%}
            .dashboard-logo-circled{display:flex;align-items:center;justify-content:center}
            .dashboard-logo-outer-circle{width:56px;height:56px;border-radius:50%;display:flex;align-items:center;justify-content:center;padding:4px;box-shadow:var(--shadow-inset)}
            .dashboard-logo-inner-circle{width:48px;height:48px;border-radius:50%;background:linear-gradient(90deg,#42a5f5 0%,#6919d2 100%);display:flex;align-items:center;justify-content:center}
            .dashboard-logo-text{color:#fff;font-weight:700;text-transform:uppercase;font-size:16px;letter-spacing:1px}
            .dashboard-title-rainbow{background:linear-gradient(90deg,#1976d2,#e040fb,#1976d2);background-clip:text;-webkit-background-clip:text;color:transparent;-webkit-text-fill-color:transparent}
            .dashboard-datetime-cards{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:8px}
            .dashboard-datetime-cards .card{background:var(--bg-color);border-radius:4px;box-shadow:var(--shadow-soft);border:1px solid var(--border-color);min-width:0;display:flex;flex-direction:column}
            .dashboard-datetime-cards .card::before{content:"";position:relative;top:0;left:0;width:100%;height:3px;background:linear-gradient(90deg,var(--primary-color),var(--accent-color));opacity:.5; border-radius: 4px 4px 0 0;}
            .dashboard-datetime-cards .card-header{display:flex;align-items:center;justify-content:space-between;padding:5px 10px;border-bottom:1px solid var(--border-color);border-radius:0}
            .dashboard-datetime-cards .card-title,.dashboard-meta-cards .card-title{font-size:14px;font-weight:600;text-transform:uppercase;color:var(--primary-color)}
            .dashboard-datetime-cards .card-icon svg{width:24px;height:24px;box-shadow:var(--shadow-soft);border:1px solid var(--border-color);padding:4px;color:var(--text-muted); border-radius: 4px;}
            .dashboard-datetime-cards .card-body{padding:10px 18px;display:flex;flex-direction:column;gap:2px}
            .dashboard-datetime-cards .datetime-value{font-weight:600;color:var(--text-color);font-size:12px}
            .dashboard-status-cards{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(2,1fr);gap:30px}
            .dashboard-status-cards .card{border-radius:6px;box-shadow:var(--shadow-soft);border:1px solid var(--border-color);min-width:100px;display:flex;flex-direction:column;justify-content:flex-start;background:var(--bg-color);position:relative;z-index:1;overflow:hidden}
            .dashboard-status-cards .card.pass{background:linear-gradient(135deg,#43e97a33 0%,#38f9d733 100%)}
            .dashboard-status-cards .card.fail{background:linear-gradient(135deg,#ff5f6d33 0%,#ffc37133 100%)}
            .dashboard-status-cards .card.skip{background:linear-gradient(135deg,#f7971e33 0%,#ffd20033 100%)}
            .dashboard-status-cards .card.total{background:linear-gradient(135deg,#2196f333 0%,#9c27b033 100%)}
            .dashboard-status-cards .card-header{display:flex;align-items:center;justify-content:space-between;width:100%;margin-bottom:25px;border-radius:4px 4px 0 0;padding:10px;background:#ffffff1a;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border-bottom:1px solid #fff3;z-index:2}
            .dashboard-status-cards .card-title{font-size:16px;font-weight:600;color:var(--text-color);text-shadow:0 1px 2px #00000014;text-transform:uppercase}
            .dashboard-status-cards .card-header-actions{display:flex;align-items:center;gap:8px}
            .dashboard-status-cards .card-view-btn{display:flex;align-items:center;justify-content:center;background:#ffffff26;backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px);border-radius:6px;width:28px;height:28px;border:1px solid #ffffff4d;box-shadow:0 4px 15px #0000001a;cursor:pointer;transition:box-shadow .2s;color:var(--text-color)}
            .dashboard-status-cards .card-icon{display:flex;align-items:center;justify-content:center;background:#ffffff26;backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px);border-radius:6px;width:28px;height:28px;border:1px solid #ffffff4d;box-shadow:0 4px 15px #0000001a;position:relative;overflow:hidden}
            .dashboard-status-cards .card-body{display:flex;align-items:flex-end;justify-content:space-between;width:100%;z-index:2}
            .dashboard-status-cards .status-number,.dashboard-status-cards .status-percentage{font-size:18px;font-weight:600;color:var(--text-color);text-shadow:0 1px 2px #00000014;padding:0 15px;visibility:hidden}
            .dashboard-status-cards .status-progressbar{margin-top:10px;padding:0 15px 15px;width:100%;z-index:2}
            .dashboard-status-cards .status-progress{border-radius:3px;box-shadow:var(--shadow-inset);height:8px;width:100%;overflow:hidden}
            .dashboard-status-cards .status-progress-fill{height:7px;width:0;border-radius:3px;transition:width .4s}
            .dashboard-status-cards .status-progress-fill.pass{background:linear-gradient(90deg,#43e97b80 0%,#38f9d780 100%)}
            .dashboard-status-cards .status-progress-fill.fail{background:linear-gradient(90deg,#ff585880 0%,#f0981980 100%)}
            .dashboard-status-cards .status-progress-fill.skip{background:linear-gradient(90deg,#f7971e80 0%,#ffd20080 100%)}
            .dashboard-status-cards .status-progress-fill.total{background:linear-gradient(90deg,#2196f380 0%,#21cbf380 100%)}
            .dashboard-meta-cards{display:flex;flex-direction:column;gap:16px}
            .dashboard-meta-cards .card{background:var(--bg-color);border-radius:6px;box-shadow:var(--shadow-soft);border:1px solid var(--border-color);padding:15px;min-width:200px;max-width:100%;display:flex;flex-direction:column;position:relative;overflow:hidden}
            .dashboard-meta-cards .card::before{content:"";position:absolute;left:0;top:0;bottom:0;width:4px;background:var(--meta-accent-gradient, linear-gradient(180deg,var(--primary-color),var(--accent-color)));border-radius:6px 0 0 6px;opacity:.5}
            .dashboard-meta-cards .card-header{display:flex;align-items:center;justify-content:space-between;width:100%;margin-bottom:8px}
            .dashboard-meta-cards .card-icon{display:flex;align-items:center;justify-content:center;background:var(--bg-color);border-radius:1px;border-radius:4px;box-shadow:var(--shadow-soft);border:1px solid var(--border-color);width:24px;height:24px}
            .dashboard-meta-cards .card-body{display:flex;align-items:center;justify-content:space-between;width:100%}
            .dashboard-meta-cards .meta-value{font-size:12px;color:var(--text-color);font-weight:600}
            .dashboard-charts-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-top:8px}
            .dashboard-charts-grid .card{min-width:0;min-height:180px;display:flex;flex-direction:column;align-items:flex-start;background:var(--bg-color);border-radius:6px;box-shadow:var(--shadow-soft);border:1px solid var(--border-color);padding:10px}
            .dashboard-charts-grid .card:only-child,.dashboard-charts-grid .card:last-child:nth-child(odd):nth-last-child(1){grid-column:1 / -1}
            .dashboard-charts-grid .card-header{display:flex;align-items:center;justify-content:space-between;width:100%;margin-bottom:8px}
            .dashboard-charts-grid .card-title{font-size:14px;font-weight:600;color:var(--primary-color);margin-bottom:0;text-transform:uppercase}
            .dashboard-charts-grid .card-header-actions{display:flex;align-items:center;gap:8px}
            .dashboard-charts-grid .card-download-btn{background:var(--bg-color);cursor:pointer;display:flex;align-items:center;box-shadow:var(--shadow-soft);border:1px solid var(--border-color);border-radius:4px;width:24px;height:24px;padding:5px}
            .dashboard-charts-grid .card-download-btn:hover{box-shadow:var(--shadow-inset)}
            .dashboard-charts-grid .card-header-icon{display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow-soft);border:1px solid var(--border-color);border-radius:4px;width:24px;height:24px;padding:5px}
            .dashboard-charts-grid .card-body{width:100%;height:320px;min-height:220px;display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start;position:relative;overflow:visible;padding-bottom:10px}
            .dashboard-charts-grid .card-footer{width:100%;display:flex;align-items:center;justify-content:center}
            .chart-container{width:100%;height:100%;display:flex;align-items:center;justify-content:center;position:relative}
            .chart-svg{max-width:100%;max-height:100%;width:auto;height:auto;display:block}
            .chart-pie{width:280px;height:280px}
            .chart-bar,.chart-line{width:100%;height:260px}
            .chart-container{min-height:280px;overflow:visible}
            #test-tag-distribution-chart{overflow-x:auto;overflow-y:auto;max-height:400px}
            #test-tag-distribution-chart::-webkit-scrollbar{width:8px;height:8px}
            #test-tag-distribution-chart::-webkit-scrollbar-track{background:var(--bg-color);border-radius:4px}
            #test-tag-distribution-chart::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:4px}
            #test-tag-distribution-chart::-webkit-scrollbar-thumb:hover{background:var(--text-muted)}
            #test-tag-distribution-chart::-webkit-scrollbar-corner{background:var(--bg-color)}
            .chart-tooltip{position:absolute;background:var(--text-muted);color:#fff;padding:8px 12px;border-radius:6px;font-size:12px;white-space:nowrap;pointer-events:none;opacity:0;transition:opacity .2s ease;z-index:1000;max-width:250px;line-height:1.4}
            .chart-tooltip br{line-height:1.6}
            .chart-percentage-text{user-select:none;font-size:12px}
            .chart-tooltip.show{opacity:1}
            .legend-container{display:flex;flex-wrap:wrap;gap:12px;padding:10px 12px;justify-content:center;align-items:center;width:100%;text-align:center}
            .legend-item{display:flex;align-items:center;gap:6px;font-size:11px;color:var(--text-muted);font-weight:500}
            .legend-color{width:12px;height:12px;border-radius:2px;flex-shrink:0}
            .chart-axis-label{font-size:11px;fill:var(--text-muted);font-weight:500}
            .chart-grid-line{stroke:var(--border-color);stroke-width:1;opacity:.5}
            .chart-data-element{transition:transform .1s ease;cursor:pointer}
            .chart-data-element:hover{transform:scale(1.01)}
            .chart-segment:hover{stroke:var(--bg-color);stroke-width:1}
            .chart-bar-rect{transition:transform .1s ease}
            .chart-bar-rect:hover{transform:scale(1.01)}
            .chart-line-point{transition:r .1s ease}
            .chart-line-point:hover{r:5}
            .chart-line-path{fill:none;stroke-width:2.5}
            .ui-testing-layout{height:calc(100vh - var(--header-height));display:flex}
            .ui-testing-col-left{width:33.333%;height:100%;border-right:1px solid var(--border-color);display:flex;flex-direction:column}
            .ui-testing-col-left .card{background-color:var(--bg-color);height:100%}
            .ui-testing-col-left .card-header{height:60px;padding:0 10px;border-bottom:1px solid var(--border-color);display:flex;align-items:center;gap:12px;background-color:var(--bg-color);position:sticky;top:0;z-index:10}
            .ui-testing-col-left .card-title-icon{width:30px;height:30px;display:flex;align-items:center;justify-content:center;background-color:var(--bg-color);border:1px solid var(--border-color);border-radius:4px;box-shadow:var(--shadow-soft);flex-shrink:0}
            .ui-testing-col-left .test-search{flex-grow:1;display:flex;align-items:center;border:1px solid var(--border-color);border-radius:8px;background-color:var(--bg-color);box-shadow:var(--shadow-soft);overflow:hidden;min-width:0}
            .ui-testing-col-left .test-search-input{flex-grow:1;border:none;background-color:var(--bg-color);color:var(--text-color);padding:6px;box-shadow:var(--shadow-inset);border-radius:8px 0 0 8px;min-width:0}
            .ui-testing-col-left .test-search-input:focus{outline:none}
            .ui-testing-col-left .test-search-button{width:30px;height:30px;display:flex;align-items:center;justify-content:center;background-color:var(--bg-color);border:none;border-left:1px solid var(--border-color);cursor:pointer;flex-shrink:0}
            .ui-testing-col-left .test-search-button:hover{box-shadow:var(--shadow-inset)}
            .ui-testing-col-left .card-body{height:calc(100% - var(--header-height))}
            .test-list-container{flex-grow:1;overflow-y:auto;height:100%}
            .test-card{display:flex;align-items:center;justify-content:space-between;padding:12px;border-bottom:1px solid var(--border-color);background-color:var(--bg-color);cursor:pointer;}
            .test-card:hover{background: linear-gradient(135deg, rgba(var(--primary-color-rgb), 0.08) 0%, rgba(var(--accent-color-rgb), 0.05) 100%);}
            .test-card[test-status="pass"].active{background-color:rgba(var(--success-color-rgb),0.1);box-shadow:var(--shadow-inset)}
            .test-card[test-status="fail"].active{background-color:rgba(var(--danger-color-rgb),0.1);box-shadow:var(--shadow-inset)}
            .test-card[test-status="skip"].active{background-color:rgba(var(--warning-color-rgb),0.1);box-shadow:var(--shadow-inset)}
            .test-id-box{background-color:var(--bg-color);box-shadow:var(--shadow-soft);border:1px solid var(--border-color);border-radius:4px;min-width:60px;position:relative;display:flex;flex-direction:column;padding-top:25px;padding-bottom:8px}
            .test-id-label{font-size:12px;color:var(--text-muted);font-weight:600;border-bottom:1px solid var(--border-color);text-align:left;position:absolute;top:0;left:0;width:100%;padding:2px 5px;z-index:1}
            .test-id-value{font-size:12px;text-align:center;font-weight:600;color:var(--text-color);display:flex;justify-content:center;align-items:center}
            .test-info{flex-grow:1;overflow:hidden;margin:0 10px}
            .test-title{display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%;font-size:14px;text-transform:uppercase;color:var(--text-color);margin-bottom:5px}
            .test-metadata{font-size:12px;color:var(--text-muted);display:flex;align-items:center;gap:15px}
            .test-metadata-item{display:flex;align-items:center;gap:4px}
            .status-badge{font-size:10px;font-weight:600;text-transform:uppercase;padding:4px 10px;border-radius:20px;color:#fff;box-shadow:var(--shadow-soft);border:solid 1px var(--border-color)}
            .status-badge[test-status="pass"]{background-color:var(--success-color)}
            .status-badge[test-status="fail"]{background-color:var(--danger-color)}
            .status-badge[test-status="skip"]{background-color:var(--warning-color)}
            .status-badge[test-status="info"]{background-color:var(--primary-color)}
            .dropdown-container{position:relative}
            .dropdown-button{width:30px;height:30px;display:flex;align-items:center;justify-content:center;background-color:var(--bg-color);border:1px solid var(--border-color);border-radius:4px;box-shadow:var(--shadow-soft);cursor:pointer;position:relative;flex-shrink:0}
            .dropdown-button:disabled{opacity:.5;cursor:not-allowed}
            .dropdown-menu{position:absolute;top:100%;right:0;margin-top:5px;background-color:var(--bg-color);border:1px solid var(--border-color);border-radius:4px;box-shadow:var(--shadow-soft);min-width:70px;z-index:100;display:none}
            .dropdown-menu.show{display:block}
            .dropdown-option{font-size:12px;padding:2px 8px;margin:10px;cursor:pointer;display:flex;align-items:center;border-radius:12px;box-shadow:var(--shadow-soft);border:1px solid var(--border-color);color:var(--text-color);gap:5px}
            .dropdown-option:hover,.dropdown-button:hover{box-shadow:var(--shadow-inset)}
            .dropdown-option.active{background-color:rgba(var(--primary-color-rgb),0.1);box-shadow:var(--shadow-inset)}
            .dropdown-option-indicator{width:10px;height:10px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-right:5px}
            .dropdown-option-indicator[test-status="all"],.dropdown-option-indicator[log-status="all"]{background:linear-gradient(45deg,var(--status-success-color) 0%,var(--status-error-color) 50%,var(--status-pending-color) 100%)}
            .dropdown-option-indicator[test-status="pass"],.dropdown-option-indicator[log-status="pass"]{background-color:var(--status-success-color)}
            .dropdown-option-indicator[test-status="fail"],.dropdown-option-indicator[log-status="fail"]{background-color:var(--status-error-color)}
            .dropdown-option-indicator[test-status="skip"],.dropdown-option-indicator[log-status="skip"]{background-color:var(--status-pending-color)}
            .dropdown-option-indicator[log-status="info"]{background-color:var(--status-info-color)}
            .dropdown-badge{position:absolute;top:-10px;right:-8px;min-width:28px;height:14px;border-radius:10px;line-height:10px;background-color:var(--text-muted);color:#fff;font-size:10px;display:flex;align-items:center;justify-content:center;padding:0 4px}
            .dropdown-badge[test-status="all"],.dropdown-badge[log-status="all"]{background-color:var(--text-muted)}
            .dropdown-badge[test-status="pass"],.dropdown-badge[log-status="pass"]{background-color:var(--status-success-color)}
            .dropdown-badge[test-status="fail"],.dropdown-badge[log-status="fail"]{background-color:var(--status-error-color)}
            .dropdown-badge[test-status="skip"],.dropdown-badge[log-status="skip"]{background-color:var(--status-pending-color)}
            .dropdown-badge[log-status="info"]{background-color:var(--status-info-color)}
            .message-container{display:flex;justify-content:center;align-items:center;align-items:center;background-color:rgba(var(--secondary-color-rgb),0.1);border-radius:12px;margin:15px;height:90%}
            .message-container .message-box{text-align:center;color:var(--text-muted);padding:20px}
            .message-container .kaomoji{font-size:1.2rem;margin:10px;color:var(--text-muted);white-space:nowrap}
            .ui-testing-col-right{width:66.667%;height:100%;display:flex;flex-direction:column}
            .test-details-header{height:60px;padding:8px 25px;border-bottom:1px solid var(--border-color);display:flex;align-items:center;gap:10px;background-color:var(--bg-color)}
            .test-details-icon{width:30px;height:30px;display:flex;align-items:center;justify-content:center;background-color:var(--bg-color);border:1px solid var(--border-color);border-radius:6px;box-shadow:var(--shadow-soft)}
            .test-details-title{font-size:14px;font-weight:600;text-transform:uppercase;color:var(--text-muted);flex-grow:1}
            .export-button{display:flex;align-items:center;gap:8px;padding:6px 12px;background-color:var(--bg-color);border:1px solid var(--border-color);border-radius:6px;box-shadow:var(--shadow-soft);color:var(--text-color);cursor:pointer;font-size:12px;font-weight:600}
            .export-button:hover:not(:disabled){box-shadow:var(--shadow-inset)}
            .export-button:disabled{opacity:.5;cursor:not-allowed;pointer-events:none}
            .test-details-content{display:flex;flex-direction:column;height:calc(100vh - var(--header-height) - 60px);overflow:hidden}
            .test-info-section{padding:10px 10px 5px}
            .test-info-section .card{background-color:var(--bg-color);border:1px solid var(--border-color);border-radius:8px;box-shadow:var(--shadow-soft);margin-bottom:10px}
            .test-info-section .card-header{display:flex;justify-content:space-between;align-items:center;padding:12px 15px;border-bottom:1px solid var(--border-color)}
            .test-info-section .card-header-title,.test-info-section .card-header-actions{display:flex;align-items:center;gap:10px}
            .test-info-section .card-header-icon{width:30px;height:30px;display:flex;align-items:center;justify-content:center;background-color:var(--bg-color);border:1px solid var(--border-color);border-radius:6px;box-shadow:var(--shadow-soft)}
            .test-info-section .card-header-title h3{font-size:14px;font-weight:600;text-transform:uppercase;color:var(--text-color);margin:0}
            .accordion-btn{width:30px;height:30px;display:flex;align-items:center;justify-content:center;background-color:var(--bg-color);border:1px solid var(--border-color);border-radius:6px;box-shadow:var(--shadow-soft);cursor:pointer;position:relative}
            .accordion-btn:hover{box-shadow:var(--shadow-inset)}
            .test-info-section .card-body{overflow:hidden;transition:max-height .35s cubic-bezier(0.4,0,0.2,1);will-change:max-height;max-height:none}
            .test-info-section .card-body.collapsed{max-height:0;padding-top:0;padding-bottom:0}
            .test-info-grid{display:flex;margin-bottom:15px;margin-top:15px}
            .test-info-grid-col{flex:1;padding:0 15px}
            .test-info-row{margin-bottom:15px;padding:0 15px}
            .test-info-item{display:flex;align-items:flex-start}
            .test-info-icon{width:30px;height:30px;display:flex;align-items:center;justify-content:center;background-color:var(--bg-color);border:1px solid var(--border-color);border-radius:6px;box-shadow:var(--shadow-soft)}
            .test-info-content{display:flex;flex-direction:column;flex:1;margin-left:15px;overflow:hidden}
            .test-info-label{color:var(--text-muted);font-size:12px;text-transform:uppercase;font-weight:600}
            .test-info-value{font-size:14px;color:var(--text-color)}
            .test-info-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:100%;display:block}
            .test-info-tags-container{display:flex;align-items:center;padding-top:5px;gap:4px}
            .test-info-label-inline{color:var(--text-muted);font-size:12px;text-transform:uppercase;font-weight:600;margin-right:15px;align-items:center}
            .tag-1{background-color:#5c5cdec3}
            .tag-2{background-color:#8944d8c3}
            .tag-3{background-color:#0e6f8ac3}
            .tag-4{background-color:#c82b8fc3}
            .tag-5{background-color:#7a7410c3}
            .test-logs-section{padding:5px 10px;flex-grow:1;display:flex;flex-direction:column;overflow:hidden;max-height:90%}
            .test-logs-section .card{background-color:var(--bg-color);border:1px solid var(--border-color);border-radius:8px;box-shadow:var(--shadow-soft);height:100%;display:flex;flex-direction:column}
            .test-logs-section .card-header{display:flex;justify-content:space-between;align-items:center;padding:8px 25px 8px 15px;border-bottom:1px solid var(--border-color);flex-shrink:0}
            .test-logs-section .card-body{padding:15px;overflow-y:auto;box-shadow:var(--shadow-inset);flex-grow:1;height:100%}
            .test-logs-section .card-header-title{display:flex;align-items:center;gap:10px}
            .test-logs-section .card-header-icon{width:30px;height:30px;display:flex;align-items:center;justify-content:center;background-color:var(--bg-color);border:1px solid var(--border-color);border-radius:6px;box-shadow:var(--shadow-soft)}
            .test-logs-section .card-header-title h3{font-size:14px;font-weight:600;text-transform:uppercase;color:var(--text-color);margin:0}
            .test-logs-section .card-header-actions{display:flex;align-items:center;justify-content:center;gap:10px}
            .test-log-item{margin-bottom:10px;border:1px solid var(--border-color);border-radius:6px;overflow:hidden}
            .test-log-header{display:flex;align-items:center;background-color:var(--bg-color);height:38px}
            .test-log-status{width:5px;height:100%}
            .test-log-item[log-status="pass"] .test-log-status{background-color:var(--success-color)}
            .test-log-item[log-status="fail"] .test-log-status{background-color:var(--danger-color)}
            .test-log-item[log-status="skip"] .test-log-status{background-color:var(--warning-color)}
            .test-log-item[log-status="info"] .test-log-status{background-color:var(--info-color)}
            .test-log-id{font-size:12px;border-right:1px solid var(--border-color);padding:0 15px;font-weight:600;height:100%;color:var(--text-color);text-transform:uppercase;display:flex;align-items:center;white-space:nowrap}
            .test-log-name{font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:var(--text-color);margin:0 12px;flex-grow:1}
            .test-log-time{font-size:12px;color:var(--text-muted);white-space:nowrap;margin-right:15px;display:flex;align-items:center;gap:4px}
            .test-log-time svg{width:12px;height:12px}
            .test-log-actions{display:flex;gap:10px;margin-right:12px}
            .test-log-btn{width:24px;height:24px;display:flex;align-items:center;justify-content:center;border:1px solid var(--border-color);border-radius:4px;background-color:var(--bg-color);box-shadow:var(--shadow-soft);cursor:pointer}
            .test-log-btn svg{width:14px;height:14px}
            .test-log-btn:hover{box-shadow:var(--shadow-inset)}
            .test-log-btn.disabled{opacity:.5;cursor:not-allowed}
            .test-log-content{padding:0;border-top:1px solid var(--border-color);max-height:0;overflow:hidden;color:var(--text-color);font-size:14px;transition:max-height .3s ease-in-out,padding .3s ease-in-out;display:flex;align-items:center;will-change:max-height}
            .test-log-item.active .test-log-content{padding:18px}
            .test-log-time-column{flex:0 0 74px;color:var(--text-muted);font-size:12px}
            .test-log-message-column{flex:1;padding-left:0}
            .test-log-toggle svg{transition:transform .4s cubic-bezier(0.4,0,0.2,1);transform-origin:center}
            .test-log-item.active .test-log-toggle svg{transform:rotate(180deg)}
            #test-info-accordion-icon{transition:transform .4s cubic-bezier(0.4,0,0.2,1);transform-origin:center}
            .test-log-time-column,.test-log-message-column{opacity:0;transition:opacity .2s ease-in-out}
            .test-log-item.active .test-log-time-column,.test-log-item.active .test-log-message-column{opacity:1}
            .test-log-item[log-status="pass"] .test-log-id,.test-log-item[log-status="pass"] .test-log-content{background-color:#4caf501a}
            .test-log-item[log-status="fail"] .test-log-id,.test-log-item[log-status="fail"] .test-log-content{background-color:#f443361a}
            .test-log-item[log-status="skip"] .test-log-id,.test-log-item[log-status="skip"] .test-log-content{background-color:#ff98001a}
            .test-log-item[log-status="info"] .test-log-id,.test-log-item[log-status="info"] .test-log-content{background-color:#2196f31a}
            .toast-container{position:fixed;bottom:32px;left:50%;transform:translateX(-50%);z-index:2000;display:flex;flex-direction:column;align-items:center;pointer-events:none}
            .toast-message{padding:14px 28px;border-radius:8px;font-size:12px;font-weight:400;margin-top:8px;box-shadow:0 2px 12px #00000026;opacity:0;animation:toast-in .3s forwards,toast-out .3s 2.7s forwards;pointer-events:auto;transition:opacity .5s}
            .toast-message.toast-success{background:#d4edda;color:#155724}
            .toast-message.toast-danger{background:#f8d7da;color:#721c24}
            .toast-message.toast-warning{background:#fff3cd;color:#856404}
            .toast-message.toast-info{background:#d1ecf1;color:#0c5460}
            @keyframes toast-in {
            from{opacity:0;transform:translateY(30px)}
            to{opacity:1;transform:translateY(0)}
            }
            @keyframes toast-out {
            to{opacity:0;transform:translateY(30px)}
            }
            .media-modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#0009;backdrop-filter:blur(2px)}
            .media-container{cursor:default}
            .media-container[style*="grab"]{cursor:grab}
            .media-modal-content{background-color:var(--bg-color);margin:5% auto;border:1px solid var(--border-color);border-radius:8px;width:80%;max-width:1000px;max-height:80vh;display:flex;flex-direction:column;position:relative;animation:modalFadeIn .3s}
            @keyframes modalFadeIn {
            from{opacity:0;transform:translateY(-20px)}
            to{opacity:1;transform:translateY(0)}
            }
            .media-modal-header{padding:12px 18px;border-bottom:1px solid var(--border-color);display:flex;border-radius:8px 8px 0 0;justify-content:space-between;align-items:center}
            .media-modal-title{display:flex;align-items:center;gap:10px}
            .media-modal-icon{width:30px;height:30px;display:flex;align-items:center;justify-content:center;background-color:var(--bg-color);border:1px solid var(--border-color);border-radius:6px;box-shadow:var(--shadow-soft)}
            .media-modal-header h5{margin:0;font-size:14px;font-weight:600;color:var(--text-color)}
            .media-modal-close{background:none;border:none;cursor:pointer;color:var(--text-muted);padding:5px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:background-color .2s;box-shadow:var(--shadow-soft)}
            .media-modal-close:hover{background-color:#0000001a;color:var(--text-color)}
            .media-modal-body{padding:10px;overflow:auto;flex:1;display:flex;align-items:center;justify-content:center;min-height:300px;max-height:70vh;background-color:var(--bg-color);position:relative;box-sizing:border-box}
            .media-container{width:100%;height:100%;display:none;align-items:center;justify-content:center;position:relative;overflow:hidden}
            .media-container:not(.d-none){display:flex}
            .media-content{width:auto;height:auto;object-fit:contain;border:1px solid var(--border-color);background-color:#fff;max-width:100%;max-height:100%}
            .img-fluid{max-width:100%;height:auto;display:block}
            .media-modal-footer{padding:12px 18px;border-top:1px solid var(--border-color)}
            .media-controls{display:flex;gap:10px;align-items:center;justify-content:center}
            .media-btn{width:32px;height:32px;display:flex;align-items:center;justify-content:center;border:1px solid var(--border-color);border-radius:4px;background:var(--bg-color);box-shadow:var(--shadow-soft);color:var(--text-color);cursor:pointer;transition:box-shadow .2s}
            .media-btn:hover,.media-btn.active{box-shadow:var(--shadow-inset)}
            .draggable{cursor:grab}
            .dragging{cursor:grabbing!important}
            .media-btn.disabled{opacity:.5;cursor:not-allowed;pointer-events:auto}
            .media-btn:hover:not(.disabled){box-shadow:var(--shadow-inset)}
            .loading-container{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%;position:absolute;top:0;left:0;z-index:5;background-color:var(--bg-color);color:var(--text-muted);backdrop-filter:blur(2px)}
            .loading-icon{color:var(--text-muted);margin-bottom:10px}
            .loading-text{color:var(--text-muted);font-size:14px;font-weight:600}
            #annotationCanvas{position:absolute;top:0;left:0;z-index:10;cursor:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="%237b8ca0"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM21.41 6.34l-3.75-3.75-2.53 2.54 3.75 3.75 2.53-2.54z"/></svg>') 0 24,auto;width:100%;height:100%;pointer-events:none;color:var(--text-muted)}
            .annotation-tools{position:absolute;bottom:2px;left:50%;transform:translateX(-50%);background-color:var(--bg-color);border:1px solid var(--border-color);border-radius:8px;padding:10px;display:none;z-index:20;flex-direction:column;gap:10px}
            .annotation-tools .color-picker{display:flex;gap:8px;justify-content:center}
            .annotation-tools .color-option{width:24px;height:24px;border-radius:50%;cursor:pointer;border:1px solid var(--border-color);box-shadow:var(--shadow-soft)}
            .annotation-tools .shape-tools{display:flex;gap:8px;justify-content:center}
            .annotation-tools .shape-btn{width:32px;height:32px;display:flex;align-items:center;justify-content:center;border:1px solid var(--border-color);border-radius:6px;background-color:var(--bg-color);box-shadow:var(--shadow-soft);cursor:pointer;color:var(--text-color)}
            .annotation-tools .shape-btn svg{width:16px;height:16px}
            .annotation-tools .shape-btn:hover,.annotation-tools .clear-btn:hover{box-shadow:var(--shadow-inset)}
            .annotation-tools .shape-btn.active{box-shadow:var(--shadow-inset);color:var(--primary-color)}
            .annotation-tools .clear-btn{width:32px;height:32px;border-radius:6px;border:1px solid var(--border-color);box-shadow:var(--shadow-soft);display:flex;align-items:center;justify-content:center;padding:4px;color:var(--text-color);background-color:var(--bg-color);cursor:pointer}
            .color-option.active{border:1px solid var(--border-color);box-shadow:var(--shadow-inset)}
            .media-zoom-wrapper{position:relative;width:100%;height:100%;display:flex;align-items:center;justify-content:center;transition:transform .2s;will-change:transform;max-width:100%;max-height:100%}
            .download-loading{display:flex;align-items:center;justify-content:center;min-width:32px;min-height:32px;animation:spin 1s linear infinite}
            @keyframes spin {
            100%{transform:rotate(360deg)}
            }
            @keyframes slideInRight {
            from{transform:translateX(100%);opacity:0}
            to{transform:translateX(0);opacity:1}
            }
            @keyframes slideOutRight {
            from{transform:translateX(0);opacity:1}
            to{transform:translateX(100%);opacity:0}
            }
            @keyframes pulse-danger {
            0%{background-color:var(--danger-color);box-shadow:0 0 0 0 rgba(220,53,69,0.7)}
            50%{background-color:#ff4757;box-shadow:0 0 0 8px rgba(220,53,69,0)}
            100%{background-color:var(--danger-color);box-shadow:0 0 0 0 rgba(220,53,69,0)}
            }
            .badge-pulse{animation:pulse-danger 1.5s ease-in-out infinite;position:relative;z-index:1}
            .badge-pulse-active{animation:pulse-danger 1.5s ease-in-out infinite;position:relative;z-index:1}
        </style>
</head>

<body data-theme="light">
    <header class="page-header" role="banner">
        <div class="header-brand">
            <div class="brand-icon" data-tooltip="Vision Report" data-placement="right" aria-label="Vision Report Logo">
                <svg width="56" height="56" viewBox="40 50 160 120" style="display:block" aria-hidden="true">
                    <defs>
                        <linearGradient id="auroraGradientAnimated" x1="60" y1="70" x2="180" y2="150" gradientUnits="userSpaceOnUse">
                            <stop offset="0%" stop-color="#6D5BFF">
                                <animate attributeName="stop-color" values="#6D5BFF;#00E0FF;#00FFA3;#6D5BFF" dur="3s" repeatCount="indefinite" /> </stop>
                            <stop offset="50%" stop-color="#00E0FF">
                                <animate attributeName="stop-color" values="#00E0FF;#00FFA3;#FF6DCB;#00E0FF" dur="3s" repeatCount="indefinite" /> </stop>
                            <stop offset="100%" stop-color="#00FFA3">
                                <animate attributeName="stop-color" values="#00FFA3;#FF6DCB;#6D5BFF;#00FFA3" dur="3s" repeatCount="indefinite" /> </stop>
                        </linearGradient>
                        <filter id="wingShadow" x="-20%" y="-20%" width="140%" height="140%">
                            <feDropShadow dx="0" dy="4" stdDeviation="4" flood-color="#6D5BFF" flood-opacity="0.25" /> </filter>
                        <linearGradient id="vrTextGradient" x1="0" y1="0" x2="1" y2="1">
                            <stop offset="0%" stop-color="#6D5BFF" />
                            <stop offset="100%" stop-color="#00FFA3" /> </linearGradient>
                    </defs>
                    <path d="M50 65 Q120 210 190 65 Q165 105 120 160 Q75 105 50 65 Z" fill="url(#auroraGradientAnimated)" filter="url(#wingShadow)" opacity="0.95" />
                    <text id="r-logo" x="120" y="120" text-anchor="middle" font-family="Montserrat, Arial, sans-serif" font-size="60" font-weight="900" fill="url(#vrTextGradient)" opacity="0" style="letter-spacing:-2px">R</text>
                </svg>
            </div>
            <div class="brand-name" aria-label="Vision Report"></div>
        </div>
        <div class="header-actions" role="toolbar" aria-label="Header actions">
            <button type="button" class="header-button" data-tooltip="Reload" data-placement="bottom" aria-label="Reload page">
                <svg fill="currentColor" aria-hidden="true">
                    <use href="#icon-reload"></use>
                </svg>
            </button>
            <button type="button" id="themeToggle" class="header-button theme-toggle" data-tooltip="Toggle Theme" data-placement="bottom" aria-label="Toggle dark mode" aria-pressed="false">
                <svg class="icon-sun" aria-hidden="true">
                    <use href="#icon-sun"></use>
                </svg>
                <svg class="icon-moon" aria-hidden="true">
                    <use href="#icon-moon"></use>
                </svg>
            </button>
        </div>
    </header>
    <aside class="sidebar" id="sidebar-nav" role="navigation" aria-label="Main navigation">
        <button class="nav-item active" data-section="dashboard" data-tooltip="Dashboard" data-placement="right" aria-label="Dashboard" aria-current="page">
            <svg fill="currentColor" aria-hidden="true">
                <use href="#icon-dashboard"></use>
            </svg>
        </button>
        <button class="nav-item" data-section="ui-testing" data-tooltip="UI Testing" data-placement="right" aria-label="UI Testing">
            <svg fill="currentColor" aria-hidden="true">
                <use href="#icon-ui-testing"></use>
            </svg>
        </button>
    </aside>
    <main class="main-content" role="main">
        <section id="dashboard" class="content-section active" role="region" aria-label="Dashboard">
            <div class="main-dashboard-layout">
                <div class="dashboard-columns">
                    <div class="dashboard-col-left">
                        <div class="dashboard-logo-title-card">
                            <div class="dashboard-logo-circled">
                                <div class="dashboard-logo-outer-circle">
                                    <div class="dashboard-logo-inner-circle"><span class="dashboard-logo-text">VR</span></div>
                                </div>
                            </div>
                            <div class="dashboard-title">
                                <h1 class="dashboard-title-rainbow">Vision Test Report</h1></div>
                        </div>
                        <div class="dashboard-status-cards" role="region" aria-label="Test status summary">
                            <div class="card pass" role="article" aria-labelledby="pass-card-title">
                                <div class="card-header"><span class="card-title" id="pass-card-title">Pass</span>
                                    <div class="card-header-actions">
                                        <button class="card-view-btn" type="button" data-tooltip="View Passed Tests" data-placement="bottom" aria-label="View passed tests in UI Testing">
                                            <svg fill="currentColor" aria-hidden="true">
                                                <use href="#icon-eye"></use>
                                            </svg>
                                        </button> <span class="card-icon" aria-hidden="true"><svg fill="currentColor" width="20" height="20" viewBox="0 0 20 20"><use href="#icon-status-pass"></use></svg></span></div>
                                </div>
                                <div class="card-body"><span class="status-number" id="statusPassNumber" data-pass-number="20" aria-label="20 passed tests">20</span> <span class="status-percentage" id="statusPassPercentage" data-pass-percentage="40" aria-label="40 percent passed">40%</span></div>
                                <div class="status-progressbar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" aria-label="Pass rate progress">
                                    <div class="status-progress">
                                        <div id="statusPassProgress" class="status-progress-fill pass"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="card fail" role="article" aria-labelledby="fail-card-title">
                                <div class="card-header"><span class="card-title" id="fail-card-title">Fail</span>
                                    <div class="card-header-actions">
                                        <button class="card-view-btn" type="button" data-tooltip="View Failed Tests" data-placement="bottom" aria-label="View failed tests in UI Testing">
                                            <svg fill="currentColor" aria-hidden="true">
                                                <use href="#icon-eye"></use>
                                            </svg>
                                        </button> <span class="card-icon" aria-hidden="true"><svg fill="currentColor" width="20" height="20" viewBox="0 0 20 20"><use href="#icon-status-fail"></use></svg></span></div>
                                </div>
                                <div class="card-body"><span class="status-number" id="statusFailNumber" data-fail-number="10" aria-label="10 failed tests">10</span> <span class="status-percentage" id="statusFailPercentage" data-fail-percentage="20" aria-label="20 percent failed">20%</span></div>
                                <div class="status-progressbar" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" aria-label="Fail rate progress">
                                    <div class="status-progress">
                                        <div id="statusFailProgress" class="status-progress-fill fail"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="card skip" role="article" aria-labelledby="skip-card-title">
                                <div class="card-header"><span class="card-title" id="skip-card-title">Skip</span>
                                    <div class="card-header-actions">
                                        <button class="card-view-btn" type="button" data-tooltip="View Skipped Tests" data-placement="bottom" aria-label="View skipped tests in UI Testing">
                                            <svg fill="currentColor" aria-hidden="true">
                                                <use href="#icon-eye"></use>
                                            </svg>
                                        </button> <span class="card-icon" aria-hidden="true"><svg fill="currentColor" width="20" height="20" viewBox="0 0 20 20"><use href="#icon-status-skip"></use></svg></span></div>
                                </div>
                                <div class="card-body"><span class="status-number" id="statusSkipNumber" data-skip-number="10" aria-label="10 skipped tests">10</span> <span class="status-percentage" id="statusSkipPercentage" data-skip-percentage="20" aria-label="20 percent skipped">20%</span></div>
                                <div class="status-progressbar" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" aria-label="Skip rate progress">
                                    <div class="status-progress">
                                        <div id="statusSkipProgress" class="status-progress-fill skip"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="card total" role="article" aria-labelledby="total-card-title">
                                <div class="card-header"><span class="card-title" id="total-card-title">Total</span>
                                    <div class="card-header-actions">
                                        <button class="card-view-btn" type="button" data-tooltip="View All Tests" data-placement="bottom" aria-label="View all tests in UI Testing">
                                            <svg fill="currentColor" aria-hidden="true">
                                                <use href="#icon-eye"></use>
                                            </svg>
                                        </button> <span class="card-icon" aria-hidden="true"><svg fill="currentColor" width="20" height="20" viewBox="0 0 20 20"><use href="#icon-status-total"></use></svg></span></div>
                                </div>
                                <div class="card-body"><span class="status-number" id="statusTotalNumber" data-total-number="40" aria-label="40 total tests">40</span> <span class="status-percentage" id="statusTotalPercentage" data-total-percentage="100" aria-label="100 percent total">100%</span></div>
                                <div class="status-progressbar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" aria-label="Total tests progress">
                                    <div class="status-progress">
                                        <div id="statusTotalProgress" class="status-progress-fill total"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="dashboard-charts-grid">
                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">Test Status Summary</div>
                                    <div class="card-header-actions">
                                        <button class="card-download-btn" title="Download Chart" data-chart="status-summary">
                                            <svg fill="currentColor">
                                                <use href="#icon-export"></use>
                                            </svg>
                                        </button><span class="card-header-icon"><svg fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><use href="#icon-chart-pie"></use></svg></span></div>
                                </div>
                                <div class="card-body scrollable" id="test-status-summary-chart"></div>
                                <div class="card-footer" id="test-status-summary-legend"></div>
                            </div>
                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">Test Tag Distribution</div>
                                    <div class="card-header-actions">
                                        <button class="card-download-btn" title="Download Chart" data-chart="tag-distribution">
                                            <svg fill="currentColor">
                                                <use href="#icon-export"></use>
                                            </svg>
                                        </button><span class="card-header-icon"><svg fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><use href="#icon-chart-bar"></use></svg></span></div>
                                </div>
                                <div class="card-body scrollable" id="test-tag-distribution-chart"></div>
                                <div class="card-footer" id="test-tag-distribution-legend"></div>
                            </div>
                        </div>
                    </div>
                    <div class="dashboard-col-right">
                        <div class="dashboard-datetime-cards">
                            <div class="card">
                                <div class="card-header"><span class="card-title">DATE</span><span class="card-icon"><svg fill="currentColor"><use href="#icon-calendar"></use></svg></span></div>
                                <div class="card-body"><span class="datetime-value" id="reportDate">25 Feb, 2025</span></div>
                            </div>
                            <div class="card">
                                <div class="card-header"><span class="card-title">TIME</span><span class="card-icon"><svg fill="currentColor"><use href="#icon-clock"></use></svg></span></div>
                                <div class="card-body"><span class="datetime-value" id="reportTime">11:44 AM - EST</span></div>
                            </div>
                        </div>
                        <div class="dashboard-meta-cards">
                            <div class="card">
                                <div class="card-header"><span class="card-title">Project</span><span class="card-icon"><svg fill="currentColor" width="16" height="16" viewBox="0 0 16 16"><use href="#icon-meta-project"></use></svg></span></div>
                                <div class="card-body"><span class="meta-value">2025 Spring Release</span></div>
                            </div>
                            <div class="card">
                                <div class="card-header"><span class="card-title">Application</span><span class="card-icon"><svg fill="currentColor" width="16" height="16" viewBox="0 0 16 16"><use href="#icon-meta-application"></use></svg></span></div>
                                <div class="card-body"><span class="meta-value">B2B</span></div>
                            </div>
                            <div class="card">
                                <div class="card-header"><span class="card-title">Environment</span><span class="card-icon"><svg fill="currentColor" width="16" height="16" viewBox="0 0 16 16"><use href="#icon-meta-environment"></use></svg></span></div>
                                <div class="card-body"><span class="meta-value">AWS-SIT</span></div>
                            </div>
                            <div class="card">
                                <div class="card-header"><span class="card-title">Tester</span><span class="card-icon"><svg fill="currentColor" width="16" height="16" viewBox="0 0 16 16"><use href="#icon-meta-tester"></use></svg></span></div>
                                <div class="card-body"><span class="meta-value">Deepak</span></div>
                            </div>
                            <div class="card">
                                <div class="card-header"><span class="card-title">Browser</span><span class="card-icon"><svg fill="currentColor" width="16" height="16" viewBox="0 0 16 16"><use href="#icon-meta-browser"></use></svg></span></div>
                                <div class="card-body"><span class="meta-value">Chrome</span></div>
                            </div>
                            <div class="card">
                                <div class="card-header"><span class="card-title">Custom Field</span><span class="card-icon"><svg fill="currentColor" width="16" height="16" viewBox="0 0 16 16"><use href="#icon-meta-custom"></use></svg></span></div>
                                <div class="card-body"><span class="meta-value">Custom Value</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section id="ui-testing" class="content-section" role="region" aria-label="UI Testing">
            <div class="ui-testing-layout">
                <div class="ui-testing-col-left">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title-icon" aria-hidden="true">
                                <svg fill="currentColor">
                                    <use href="#icon-ui-testing"></use>
                                </svg>
                            </div>
                            <div class="test-search" role="search">
                                <input class="test-search-input" name="test-search" placeholder="Search tests..." aria-label="Search tests" aria-describedby="search-description">
                                <button class="test-search-button" aria-label="Search">
                                    <svg fill="currentColor" aria-hidden="true">
                                        <use href="#icon-search"></use>
                                    </svg>
                                </button>
                            </div>
                            <div class="dropdown-container">
                                <button id="testFilterButton" class="dropdown-button" aria-label="Filter Tests" aria-haspopup="true" aria-expanded="false" data-tooltip="Filter Tests" data-placement="bottom">
                                    <svg fill="currentColor" aria-hidden="true">
                                        <use href="#icon-filter"></use>
                                    </svg> <span class="dropdown-badge" test-status="all">All</span></button>
                                <div id="testFilterDropdown" class="dropdown-menu" role="listbox" aria-labelledby="testFilterButton">
                                    <div class="dropdown-option active" data-test-filter="all" role="option" aria-selected="true"><span class="dropdown-option-indicator" test-status="all" aria-hidden="true"></span> <span>All</span></div>
                                    <div class="dropdown-option" data-test-filter="pass" role="option" aria-selected="false"><span class="dropdown-option-indicator" test-status="pass" aria-hidden="true"></span> <span>Pass</span></div>
                                    <div class="dropdown-option" data-test-filter="fail" role="option" aria-selected="false"><span class="dropdown-option-indicator" test-status="fail" aria-hidden="true"></span> <span>Fail</span></div>
                                    <div class="dropdown-option" data-test-filter="skip" role="option" aria-selected="false"><span class="dropdown-option-indicator" test-status="skip" aria-hidden="true"></span> <span>Skip</span></div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="test-list-container scrollable" id="test-list-container" role="listbox" aria-label="Test list">
                                <div class="test-card" test-status="pass" data-test-id="TC001" data-test-card="true" role="option" tabindex="0" aria-selected="true">
                                    <div class="test-id-box">
                                        <div class="test-id-label">#ID</div>
                                        <div class="test-id-value">TC001</div>
                                    </div>
                                    <div class="test-info">
                                        <div class="test-title">Login Test</div>
                                        <div class="test-metadata">
                                            <div class="test-metadata-item">
                                                <svg fill="currentColor">
                                                    <use href="#icon-calendar"></use>
                                                </svg><span>Jul 20, 2023</span></div>
                                            <div class="test-metadata-item">
                                                <svg fill="currentColor">
                                                    <use href="#icon-clock"></use>
                                                </svg><span>10:30 AM</span></div>
                                        </div>
                                    </div>
                                    <div class="status-badge" test-status="pass">PASS</div>
                                </div>
                                <div class="test-card" test-status="fail" data-test-id="TC002" data-test-card="true" role="option" tabindex="0" aria-selected="false">
                                    <div class="test-id-box">
                                        <div class="test-id-label">#ID</div>
                                        <div class="test-id-value">TC002</div>
                                    </div>
                                    <div class="test-info">
                                        <div class="test-title">Signup Test</div>
                                        <div class="test-metadata">
                                            <div class="test-metadata-item">
                                                <svg fill="currentColor">
                                                    <use href="#icon-calendar"></use>
                                                </svg><span>Jul 20, 2023</span></div>
                                            <div class="test-metadata-item">
                                                <svg fill="currentColor">
                                                    <use href="#icon-clock"></use>
                                                </svg><span>11:00 AM</span></div>
                                        </div>
                                    </div>
                                    <div class="status-badge" test-status="fail">FAIL</div>
                                </div>
                                <div class="test-card" test-status="skip" data-test-id="TC003" data-test-card="true" role="option" tabindex="0" aria-selected="false">
                                    <div class="test-id-box">
                                        <div class="test-id-label">#ID</div>
                                        <div class="test-id-value">TC003</div>
                                    </div>
                                    <div class="test-info">
                                        <div class="test-title">Search Functionality Test</div>
                                        <div class="test-metadata">
                                            <div class="test-metadata-item">
                                                <svg fill="currentColor">
                                                    <use href="#icon-calendar"></use>
                                                </svg><span>Jul 20, 2023</span></div>
                                            <div class="test-metadata-item">
                                                <svg fill="currentColor">
                                                    <use href="#icon-clock"></use>
                                                </svg><span>12:00 PM</span></div>
                                        </div>
                                    </div>
                                    <div class="status-badge" test-status="skip">SKIP</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="ui-testing-col-right">
                    <div class="test-details-header">
                        <div class="test-details-icon">
                            <svg fill="currentColor">
                                <use href="#icon-details"></use>
                            </svg>
                        </div>
                        <h3 class="test-details-title">Test Details</h3>
                        <button class="export-button" id="exportButton" aria-label="Export test results">
                            <svg fill="currentColor">
                                <use href="#icon-export"></use>
                            </svg><span>Export</span></button>
                    </div>
                    <div class="test-details-content">
                        <div class="test-info-section">
                            <div class="card">
                                <div class="card-header">
                                    <div class="card-header-title">
                                        <div class="card-header-icon">
                                            <svg fill="currentColor" width="16" height="16">
                                                <use href="#icon-info"></use>
                                            </svg>
                                        </div>
                                        <h3 class="card-header-title">Test Information</h3></div>
                                    <div class="card-header-actions">
                                        <div class="status-badge" test-status="pass">PASS</div>
                                        <button id="test-info-accordion-toggle" class="accordion-btn" aria-label="Toggle Test Information" aria-haspopup="false" aria-expanded="true" type="button">
                                            <svg id="test-info-accordion-icon" fill="currentColor">
                                                <use href="#icon-chevron-down"></use>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body" id="test-info-body"></div>
                            </div>
                        </div>
                        <div class="test-logs-section">
                            <div class="card">
                                <div class="card-header">
                                    <div class="card-header-title">
                                        <div class="card-header-icon">
                                            <svg fill="currentColor">
                                                <use href="#icon-logs"></use>
                                            </svg>
                                        </div>
                                        <h3 class="card-header-title">Test Logs</h3></div>
                                    <div class="card-header-actions">
                                        <div class="test-logs-count-container">
                                            <div class="badge badge-secondary" data-tooltip="Total Logs" data-placement="bottom" id="total-logs-count">0</div>
                                            <div class="badge badge-success" data-tooltip="Pass Logs" data-placement="bottom" id="pass-logs-count">0</div>
                                            <div class="badge badge-danger" data-tooltip="Fail Logs" data-placement="bottom" id="fail-logs-count">0</div>
                                            <div class="badge badge-warning" data-tooltip="Skip Logs" data-placement="bottom" id="skip-logs-count">0</div>
                                            <div class="badge badge-primary" data-tooltip="Info Logs" data-placement="bottom" id="info-logs-count">0</div>
                                        </div>
                                        <div class="dropdown-container">
                                            <button id="logsFilterButton" class="dropdown-button" aria-label="Filter logs" aria-haspopup="true" aria-expanded="false" data-tooltip="Filter Logs" data-placement="bottom">
                                                <svg fill="currentColor">
                                                    <use href="#icon-filter"></use>
                                                </svg><span class="dropdown-badge" log-status="all">All</span></button>
                                            <div id="logsFilterDropdown" class="dropdown-menu" role="listbox" aria-labelledby="logsFilterButton">
                                                <div class="dropdown-option active" data-log-filter="all" role="option" aria-selected="true"><span class="dropdown-option-indicator" log-status="all" aria-hidden="true"></span> <span>All</span></div>
                                                <div class="dropdown-option" data-log-filter="pass" role="option" aria-selected="false"><span class="dropdown-option-indicator" log-status="pass" aria-hidden="true"></span> <span>Pass</span></div>
                                                <div class="dropdown-option" data-log-filter="fail" role="option" aria-selected="false"><span class="dropdown-option-indicator" log-status="fail" aria-hidden="true"></span> <span>Fail</span></div>
                                                <div class="dropdown-option" data-log-filter="skip" role="option" aria-selected="false"><span class="dropdown-option-indicator" log-status="skip" aria-hidden="true"></span> <span>Skip</span></div>
                                                <div class="dropdown-option" data-log-filter="info" role="option" aria-selected="false"><span class="dropdown-option-indicator" log-status="info" aria-hidden="true"></span> <span>Info</span></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body scrollable" id="test-logs-body"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <div id="toastContainer" class="toast-container"></div>
    <div class="media-modal" id="mediaModal" role="dialog" aria-modal="true" aria-labelledby="modalLogId" aria-describedby="modalLogId">
        <div class="media-modal-content">
            <div class="media-modal-header">
                <div class="media-modal-title">
                    <div class="media-modal-icon" aria-hidden="true">
                        <svg id="modalMediaIcon" fill="currentColor">
                            <use href="#icon-image"></use>
                        </svg>
                    </div>
                    <h5 id="modalLogId">Log #1</h5></div>
                <button class="media-modal-close" title="Close" data-tooltip="Close" data-placement="left" aria-label="Close modal">
                    <svg fill="currentColor" width="24" height="24" aria-hidden="true">
                        <use href="#icon-close"></use>
                    </svg>
                </button>
            </div>
            <div class="media-modal-body shadow-inset">
                <div id="loadingContainer" class="loading-container" style="display:none" role="status" aria-live="polite">
                    <div class="loading-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24" fill="currentColor" width="40" height="40">
                            <use href="#icon-loading"></use>
                        </svg>
                    </div>
                    <div class="loading-text">Loading media...</div>
                </div>
                <div id="mediaErrorMessage" style="display:none" role="alert" aria-live="assertive"></div>
                <div id="imageContainer" class="media-container">
                    <div class="media-zoom-wrapper" id="mediaZoomWrapper"><img id="modalImage" src="" alt="Screenshot" class="media-content img-fluid" crossorigin="anonymous">
                        <canvas id="annotationCanvas"></canvas>
                    </div>
                </div>
                <div id="annotationTools" class="annotation-tools" role="toolbar" aria-label="Annotation tools">
                    <div class="color-picker" role="group" aria-label="Color picker">
                        <div class="color-option active" data-tooltip="Red" data-placement="top" data-color="#FF0000" style="background-color:red" role="button" aria-label="Red color" aria-pressed="true"></div>
                        <div class="color-option" data-tooltip="Green" data-placement="top" data-color="#00FF00" style="background-color:#0F0" role="button" aria-label="Green color" aria-pressed="false"></div>
                        <div class="color-option" data-tooltip="Blue" data-placement="top" data-color="#0000FF" style="background-color:#00F" role="button" aria-label="Blue color" aria-pressed="false"></div>
                        <div class="color-option" data-tooltip="Yellow" data-placement="top" data-color="#FFFF00" style="background-color:#e6e612" role="button" aria-label="Yellow color" aria-pressed="false"></div>
                        <div class="color-option" data-tooltip="Pink" data-placement="top" data-color="#FF00FF" style="background-color:#F0F" role="button" aria-label="Pink color" aria-pressed="false"></div>
                    </div>
                    <div class="shape-tools" role="group" aria-label="Shape tools">
                        <button class="shape-btn" id="rectTool" data-shape="rectangle" data-tooltip="Rectangle" data-placement="top" aria-label="Rectangle tool" aria-pressed="true">
                            <svg fill="currentColor" aria-hidden="true">
                                <use href="#icon-rectangle"></use>
                            </svg>
                        </button>
                        <button class="shape-btn" id="circleTool" data-shape="circle" data-tooltip="Circle" data-placement="top" aria-label="Circle tool" aria-pressed="false">
                            <svg fill="currentColor" aria-hidden="true">
                                <use href="#icon-circle"></use>
                            </svg>
                        </button>
                        <button class="shape-btn" id="lineTool" data-shape="line" data-tooltip="Line" data-placement="top" aria-label="Line tool" aria-pressed="false">
                            <svg fill="currentColor" aria-hidden="true">
                                <use href="#icon-line"></use>
                            </svg>
                        </button>
                        <button class="shape-btn" id="arrowTool" data-shape="arrow" data-tooltip="Arrow" data-placement="top" aria-label="Arrow tool" aria-pressed="false">
                            <svg fill="currentColor" aria-hidden="true">
                                <use href="#icon-arrow"></use>
                            </svg>
                        </button>
                        <button class="shape-btn" id="undoBtn" data-tooltip="Undo" data-placement="top" aria-label="Undo last annotation">
                            <svg fill="currentColor" aria-hidden="true">
                                <use href="#icon-undo"></use>
                            </svg>
                        </button>
                        <button class="shape-btn" id="redoBtn" data-tooltip="Redo" data-placement="top" aria-label="Redo last undone annotation">
                            <svg fill="currentColor" aria-hidden="true">
                                <use href="#icon-redo"></use>
                            </svg>
                        </button>
                        <button class="clear-btn" id="clearAnnotations" data-tooltip="Clear All" data-placement="top" aria-label="Clear all annotations">
                            <svg fill="currentColor" width="14" height="14" aria-hidden="true">
                                <use href="#icon-close"></use>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
            <div class="media-modal-footer">
                <div class="media-controls" role="toolbar" aria-label="Media controls">
                    <button id="zoomIn" class="media-btn" data-tooltip="Zoom In (+)" data-placement="top" aria-label="Zoom in">
                        <svg fill="currentColor" width="16" height="16" aria-hidden="true">
                            <use href="#icon-zoom-in"></use>
                        </svg>
                    </button>
                    <button id="zoomOut" class="media-btn" data-tooltip="Zoom Out (-)" data-placement="top" aria-label="Zoom out">
                        <svg fill="currentColor" width="16" height="16" aria-hidden="true">
                            <use href="#icon-zoom-out"></use>
                        </svg>
                    </button>
                    <button id="annotateBtn" class="media-btn" data-tooltip="Annotate (Shift+A)" data-placement="top" aria-label="Toggle annotation mode" aria-pressed="false">
                        <svg fill="currentColor" width="16" height="16" aria-hidden="true">
                            <use href="#icon-pencil"></use>
                        </svg>
                    </button>
                    <button id="downloadBtn" class="media-btn" data-tooltip="Download (Shift+D)" data-placement="top" aria-label="Download screenshot"><span class="download-btn-icon"><svg fill="currentColor" width="16" height="16" aria-hidden="true"><use href="#icon-download"></use></svg></span> <span class="download-btn-loading" style="display:none" aria-hidden="true"><svg fill="currentColor" width="16" height="16" class="download-loading"><use href="#icon-loading"></use></svg></span></button>
                    <button id="reset" class="media-btn" data-tooltip="Reset (Shift+R)" data-placement="top" aria-label="Reset view">
                        <svg fill="currentColor" width="16" height="16" aria-hidden="true">
                            <use href="#icon-reload"></use>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <svg style="display: none;">
        <symbol id="icon-reload" viewBox="0 0 24 24" fill="currentColor">
            <path
                d="M17.65 6.35A7.95 7.95 0 0012 4a8 8 0 108 8h-2a6 6 0 11-6-6c1.3 0 2.5.44 3.45 1.17L13 11h7V4l-2.35 2.35z">
            </path>
        </symbol>
        <symbol id="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5"></circle>
            <path
                d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42">
            </path>
        </symbol>
        <symbol id="icon-moon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M21.75 12.33A9 9 0 1 1 11.67 2.25a7 7 0 0 0 10.08 10.08z"></path>
        </symbol>
        <symbol id="icon-dashboard" viewBox="0 0 24 24" fill="currentColor">
            <rect x="3" y="3" width="8" height="7" />
            <rect x="14" y="3" width="8" height="7" />
            <rect x="14" y="14" width="8" height="7" />
            <rect x="3" y="14" width="8" height="7" />
        </symbol>
        <symbol id="icon-ui-testing" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="2" y="3" width="20" height="14" rx="2" ry="2" />
            <line x1="8" y1="21" x2="16" y2="21" />
            <line x1="12" y1="17" x2="12" y2="21" />
        </symbol>
        <symbol id="icon-calendar" viewBox="0 0 24 24" fill="currentColor">
            <path
                d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z" />
        </symbol>
        <symbol id="icon-clock" viewBox="0 0 24 24" fill="currentColor">
            <path
                d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z" />
        </symbol>
        <symbol id="icon-eye" viewBox="0 0 20 20" fill="currentColor">
            <path
                d="M10 4c-5 0-8 6-8 6s3 6 8 6 8-6 8-6-3-6-8-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm0-6.5a2 2 0 100 4 2 2 0 000-4z" />
        </symbol>
        <symbol id="icon-status-pass" viewBox="0 0 20 20" fill="currentColor">
            <circle cx="10" cy="10" r="9" stroke="#4caf50" stroke-width="2" fill="#e8f5e9" />
            <polyline points="6,11 9,14 14,7" fill="none" stroke="#4caf50" stroke-width="2" />
        </symbol>
        <symbol id="icon-status-fail" viewBox="0 0 20 20" fill="currentColor">
            <circle cx="10" cy="10" r="9" stroke="#f44336" stroke-width="2" fill="#ffebee" />
            <line x1="7" y1="7" x2="13" y2="13" stroke="#f44336" stroke-width="2" />
            <line x1="13" y1="7" x2="7" y2="13" stroke="#f44336" stroke-width="2" />
        </symbol>
        <symbol id="icon-status-skip" viewBox="0 0 20 20" fill="currentColor">
            <circle cx="10" cy="10" r="9" stroke="#ff9800" stroke-width="2" fill="#fff3e0" />
            <rect x="7" y="9" width="6" height="2" fill="#ff9800" />
        </symbol>
        <symbol id="icon-status-total" viewBox="0 0 20 20" fill="currentColor">
            <circle cx="10" cy="10" r="9" stroke="#2196f3" stroke-width="2" fill="#e3f2fd" /><text x="10" y="13"
                text-anchor="middle" font-size="10" fill="#2196f3" font-family="Arial">Σ</text>
        </symbol>
        <symbol id="icon-meta-project" viewBox="0 0 16 16" fill="currentColor">
            <rect x="3" y="3" width="10" height="10" rx="2" fill="#ffe082" stroke="#ffb300" stroke-width="1" />
            <rect x="6" y="6" width="4" height="4" fill="#ffb300" />
        </symbol>
        <symbol id="icon-meta-application" viewBox="0 0 16 16" fill="currentColor">
            <rect x="2" y="4" width="12" height="8" rx="2" fill="#e1bee7" stroke="#8e24aa" stroke-width="1" />
            <rect x="6" y="12" width="4" height="1" fill="#8e24aa" />
        </symbol>
        <symbol id="icon-meta-environment" viewBox="0 0 16 16" fill="currentColor">
            <rect x="2" y="6" width="12" height="6" rx="2" fill="#c8e6c9" stroke="#388e3c" stroke-width="1" />
            <circle cx="8" cy="9" r="2" fill="#388e3c" />
        </symbol>
        <symbol id="icon-meta-tester" viewBox="0 0 16 16" fill="currentColor">
            <circle cx="8" cy="6" r="3" fill="#90caf9" />
            <rect x="4" y="10" width="8" height="4" rx="2" fill="#1976d2" />
        </symbol>
        <symbol id="icon-meta-browser" viewBox="0 0 16 16" fill="currentColor">
            <circle cx="8" cy="8" r="7" stroke="#1976d2" stroke-width="1" fill="#e3f2fd" />
            <circle cx="8" cy="8" r="3" fill="#1976d2" />
        </symbol>
        <symbol id="icon-meta-custom" viewBox="0 0 16 16" fill="currentColor">
            <rect x="2" y="2" width="12" height="12" rx="2" fill="#ffcdd2" stroke="#f44336" stroke-width="1" />
            <circle cx="8" cy="8" r="3" fill="#f44336" />
            <rect x="7" y="6" width="2" height="4" fill="#fff" />
        </symbol>
        <symbol id="icon-export" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
        </symbol>
        <symbol id="icon-chart-pie" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path>
            <path d="M22 12A10 10 0 0 0 12 2v10z"></path>
        </symbol>
        <symbol id="icon-chart-bar" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="12" y1="20" x2="12" y2="10"></line>
            <line x1="18" y1="20" x2="18" y2="4"></line>
            <line x1="6" y1="20" x2="6" y2="16"></line>
        </symbol>
        <symbol id="icon-search" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8" />
            <line x1="21" y1="21" x2="16.65" y2="16.65" />
        </symbol>
        <symbol id="icon-filter" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
        </symbol>
        <symbol id="icon-details" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="2" y="2" width="20" height="20" rx="2" stroke="currentColor" stroke-width="2" fill="none" />
            <line x1="8" y1="8" x2="16" y2="8" stroke="currentColor" stroke-width="2" />
            <line x1="8" y1="12" x2="16" y2="12" stroke="currentColor" stroke-width="2" />
            <line x1="8" y1="16" x2="13" y2="16" stroke="currentColor" stroke-width="2" />
        </symbol>
        <symbol id="icon-chevron-down" viewBox="0 0 16 16" fill="currentColor">
            <path fill-rule="evenodd"
                d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z" />
        </symbol>
        <symbol id="icon-info" viewBox="0 0 20 20" fill="currentColor">
            <circle cx="10" cy="10" r="9" stroke="currentColor" stroke-width="2" fill="none" />
            <rect x="9" y="8" width="2" height="6" rx="1" fill="currentColor" />
            <rect x="9" y="5" width="2" height="2" rx="1" fill="currentColor" />
        </symbol>
        <symbol id="icon-test-id" viewBox="0 0 16 16" fill="currentColor">
            <path
                d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z" />
            <path
                d="M6.854 4.646a.5.5 0 0 1 0 .708L4.207 8l2.647 2.646a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 0 1 .708 0zm2.292 0a.5.5 0 0 0 0 .708L11.793 8l-2.647 2.646a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708 0z" />
        </symbol>
        <symbol id="icon-test-name" viewBox="0 0 16 16" fill="currentColor">
            <path
                d="M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811V2.828zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z" />
        </symbol>
        <symbol id="icon-description" viewBox="0 0 16 16" fill="currentColor">
            <path
                d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z" />
            <path
                d="M3 5.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 8zm0 2.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z" />
        </symbol>
        <symbol id="icon-duration" viewBox="0 0 16 16" fill="currentColor">
            <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z" />
            <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z" />
        </symbol>
        <symbol id="icon-tags" viewBox="0 0 16 16" fill="currentColor">
            <path
                d="M3 2v4.586l7 7L14.586 9l-7-7H3zM2 2a1 1 0 0 1 1-1h4.586a1 1 0 0 1 .707.293l7 7a1 1 0 0 1 0 1.414l-4.586 4.586a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 2 6.586V2z" />
            <path
                d="M5.5 5a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1zm0 1a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zM1 7.086a1 1 0 0 0 .293.707L8.75 15.25l-.043.043a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 0 7.586V3a1 1 0 0 1 1-1v5.086z" />
        </symbol>
        <symbol id="icon-logs" viewBox="0 0 16 16" fill="currentColor">
            <path
                d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z" />
            <path
                d="M3 5.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 8zm0 2.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z" />
        </symbol>
        <symbol id="icon-image" viewBox="0 0 16 16" fill="currentColor">
            <path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z" />
            <path
                d="M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z" />
        </symbol>
        <symbol id="icon-close" viewBox="0 0 24 24" fill="currentColor">
            <path
                d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
        </symbol>
        <symbol id="icon-zoom-in" viewBox="0 0 24 24" fill="currentColor">
            <path
                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
            <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z" />
        </symbol>
        <symbol id="icon-zoom-out" viewBox="0 0 24 24" fill="currentColor">
            <path
                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
            <path d="M7 9h5v1H7z" />
        </symbol>
        <symbol id="icon-annotate" viewBox="0 0 24 24" fill="currentColor">
            <path
                d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" />
        </symbol>
        <symbol id="icon-pencil" viewBox="0 0 24 24" fill="currentColor">
            <path
                d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM21.41 6.34l-3.75-3.75-2.53 2.54 3.75 3.75 2.53-2.54z" />
        </symbol>
        <symbol id="icon-download" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" />
        </symbol>
        <symbol id="icon-loading" viewBox="0 0 24 24" fill="none">
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" opacity="0.15" />
            <path d="M22 12a10 10 0 0 0-10-10" stroke="currentColor" stroke-width="4" stroke-linecap="round">
                <animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="0.8s"
                    repeatCount="indefinite" />
            </path>
        </symbol>
        <symbol id="icon-rectangle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
        </symbol>
        <symbol id="icon-circle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="9"></circle>
        </symbol>
        <symbol id="icon-line" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="5" y1="19" x2="19" y2="5"></line>
        </symbol>
        <symbol id="icon-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
        </symbol>
        <symbol id="icon-undo" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 7v6h6"></path>
            <path d="M3 13c0-4.4 3.6-8 8-8h6"></path>
            <polyline points="17 21 21 17 17 13"></polyline>
        </symbol>
        <symbol id="icon-redo" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 7v6h-6"></path>
            <path d="M21 13c0-4.4-3.6-8-8-8H7"></path>
            <polyline points="7 21 3 17 7 13"></polyline>
        </symbol>
    </svg>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            (function () {

                'use strict';

                const testDataStore = {
                    "TC001": { id: "TC001", name: "Login Test", status: "pass", duration: "00:01:45", date: "Jul 20, 2023", time: "10:30 AM", description: "This test verifies the login process with valid credentials.", tags: ["Smoke", "Regression", "Functional", "Dry Run", "Integration"], logs: [{ id: "1", status: "pass", name: "Login page loaded", time: "10:30:15", message: "Login page loaded successfully", screenshot: "https://picsum.photos/seed/loginpass/1280/720" }, { id: "2", status: "fail", name: "Invalid input validation", time: "10:31:00", message: "Error message for invalid username was not displayed as expected.", screenshot: "https://picsum.photos/seed/loginfail/1280/720" }] },
                    "TC002": { id: "TC002", name: "Signup Test", status: "fail", duration: "00:02:15", date: "Jul 20, 2023", time: "11:00 AM", description: "This test verifies the signup process.", tags: ["Smoke", "Regression"], logs: [{ id: "1", status: "pass", name: "Signup page loaded", time: "11:00:15", message: "Signup page loaded successfully", screenshot: "https://picsum.photos/seed/signuppass/1280/720" }, { id: "2", status: "info", name: "Form validation", time: "11:01:30", message: "Form validation completed for all fields.", screenshot: "https://picsum.photos/seed/signupinfo/1280/720" }, { id: "3", status: "fail", name: "Email confirmation API failed", time: "11:02:45", message: "API endpoint /api/confirm returned 503 Service Unavailable.", screenshot: null }] },
                    "TC003": { id: "TC003", name: "Search Functionality Test", status: "skip", duration: "00:01:30", date: "Jul 20, 2023", time: "12:00 PM", description: "This test verifies the search functionality.", tags: ["Regression"], logs: [] }
                };

                const chartData = {
                    statusSummary: [
                        { label: 'Pass', value: 22, color: 'var(--success-color)' },
                        { label: 'Fail', value: 48, color: 'var(--danger-color)' },
                        { label: 'Skip', value: 2, color: 'var(--warning-color)' }
                    ],
                    tagDistribution: [
                        { label: 'Smoke', value: 15 },
                        { label: 'Regression', value: 100 },
                        { label: 'Functional', value: 8 },
                        { label: 'Integration', value: 12 },
                        { label: 'Demo', value: 12 },
                        { label: 'Test', value: 12 },
                        { label: 'Dry Run', value: 0 }
                    ]
                };
                
                function createMessageContainer(iconHtml, message, additionalClasses = '') {
                    const msgDiv = document.createElement('div');
                    msgDiv.className = `message-container d-flex ${additionalClasses}`.trim();
                    msgDiv.innerHTML = `
                <div class="message-box">
                    <div class="kaomoji">${iconHtml}</div>
                    <p>${message}</p>
                </div>`;
                    return msgDiv;
                }

                function showToast(message, type = 'info') {
                    const container = document.getElementById('toastContainer');
                    if (!container) return;
                    const toast = document.createElement('div');
                    toast.className = `toast-message toast-${type}`;
                    toast.textContent = message;
                    container.appendChild(toast);
                    setTimeout(() => {
                        toast.style.opacity = 0;
                        setTimeout(() => toast.remove(), 500);
                    }, 3000);
                }

                const ThemeManager = {
                    init() {
                        this.body = document.body;
                        this.themeToggleBtn = document.getElementById('themeToggle');
                        this.THEME_KEY = 'visionTheme';
                        this.currentTheme = this.body.getAttribute('data-theme') || 'light';

                        this.initializeTheme();
                        this.themeToggleBtn?.addEventListener('click', () => this.toggleTheme());
                    },
                    setTheme(theme) {
                        this.body.setAttribute('data-theme', theme);
                        this.currentTheme = theme;
                        try {
                            localStorage.setItem(this.THEME_KEY, theme);
                        } catch (e) {
                        }
                    },
                    toggleTheme() {
                        const newTheme = this.currentTheme === 'dark' ? 'light' : 'dark';
                        this.setTheme(newTheme);
                        const themeName = newTheme.charAt(0).toUpperCase() + newTheme.slice(1);
                        showToast(`Theme switched to ${themeName} Mode`, 'info');
                        this.themeToggleBtn.setAttribute('aria-pressed', newTheme === 'dark');
                        document.dispatchEvent(new CustomEvent('themeChanged', { detail: { theme: newTheme } }));
                    },
                    initializeTheme() {
                        let savedTheme = null;
                        try {
                            savedTheme = localStorage.getItem(this.THEME_KEY);
                        } catch (e) { }
                        if (savedTheme === 'light' || savedTheme === 'dark') {
                            this.setTheme(savedTheme);
                        } else {
                            this.setTheme(this.currentTheme);
                        }
                        if (this.themeToggleBtn) {
                            this.themeToggleBtn.setAttribute('aria-pressed', this.currentTheme === 'dark');
                        }
                    }
                };

                const Navigation = {
                    init() {
                        this.navItems = document.querySelectorAll('.sidebar .nav-item');
                        this.contentSections = document.querySelectorAll('.content-section');

                        if (!this.navItems.length || !this.contentSections.length) return;

                        this.navItems.forEach(item => {
                            item.addEventListener('click', () => this.activateSection(item));
                        });
                    },
                    activateSection(selectedItem) {
                        const targetSectionId = selectedItem.getAttribute('data-section');

                        this.navItems.forEach(nav => {
                            nav.classList.toggle('active', nav === selectedItem);
                            nav.setAttribute('aria-selected', nav === selectedItem);
                        });

                        this.contentSections.forEach(section => {
                            section.classList.toggle('active', section.id === targetSectionId);
                        });
                    }
                };

                const Dashboard = {

                    init() {
                        this.initializeDashboardAnimations();
                        this.initializeViewButtons();
                        this.initializeCharts();
                        document.querySelector('.dashboard-charts-grid')?.classList.toggle('two-cards', document.querySelectorAll('.dashboard-charts-grid .card').length === 2);
                    },
                    animateValue(element, start, end, duration, isPercentage) {
                        if (start === end) {
                            element.textContent = isPercentage ? `${end}%` : end;
                            return;
                        }
                        const startTime = performance.now();
                        const update = (currentTime) => {
                            const elapsed = currentTime - startTime;
                            const progress = Math.min(elapsed / duration, 1);
                            const current = Math.round(start + (end - start) * (progress * (2 - progress))); // ease-out quad
                            element.textContent = isPercentage ? `${current}%` : current;
                            if (progress < 1) requestAnimationFrame(update);
                        };
                        requestAnimationFrame(update);
                    },
                    animateCard(cardConfig) {
                        const numberEl = document.getElementById(`status${cardConfig.id}Number`);
                        const percentageEl = document.getElementById(`status${cardConfig.id}Percentage`);
                        const progressEl = document.getElementById(`status${cardConfig.id}Progress`);

                        if (!numberEl || !percentageEl || !progressEl) return;

                        const targetNumber = parseInt(numberEl.getAttribute(cardConfig.numberAttr), 10) || 0;
                        const targetPercentage = parseInt(percentageEl.getAttribute(cardConfig.percentageAttr), 10) || 0;

                        numberEl.style.visibility = 'visible';
                        percentageEl.style.visibility = 'visible';

                        progressEl.style.transition = 'none';
                        progressEl.style.width = '0%';
                        progressEl.offsetHeight;
                        progressEl.style.transition = 'width 2s cubic-bezier(0.25,0.46,0.45,0.94)';
                        progressEl.style.width = `${targetPercentage}%`;

                        this.animateValue(numberEl, 0, targetNumber, 2000, false);
                        this.animateValue(percentageEl, 0, targetPercentage, 2000, true);
                    },
                    initializeDashboardAnimations() {
                        const cards = [
                            { id: 'Pass', numberAttr: 'data-pass-number', percentageAttr: 'data-pass-percentage' },
                            { id: 'Fail', numberAttr: 'data-fail-number', percentageAttr: 'data-fail-percentage' },
                            { id: 'Skip', numberAttr: 'data-skip-number', percentageAttr: 'data-skip-percentage' },
                            { id: 'Total', numberAttr: 'data-total-number', percentageAttr: 'data-total-percentage' }
                        ];
                        cards.forEach((card, idx) => {
                            setTimeout(() => this.animateCard(card), idx * 150);
                        });
                    },
                    initializeViewButtons() {
                        document.querySelectorAll('.dashboard-status-cards .card-view-btn').forEach(button => {
                            button.addEventListener('click', (e) => {
                                const card = e.currentTarget.closest('.card');
                                if (!card) return;
                                let filterStatus = 'all';
                                if (card.classList.contains('pass')) filterStatus = 'pass';
                                else if (card.classList.contains('fail')) filterStatus = 'fail';
                                else if (card.classList.contains('skip')) filterStatus = 'skip';

                                document.dispatchEvent(new CustomEvent('navigateToUITesting', { detail: { filter: filterStatus } }));
                            });
                        });
                    },
                    initializeCharts() {
                        this.createPieChart();
                        this.createBarChart();
                        this.initializeChartDownloads();
                    },

                    createPieChart() {
                        const container = document.getElementById('test-status-summary-chart');
                        const legend = document.getElementById('test-status-summary-legend');
                        const data = chartData.statusSummary.filter(item => item.value > 0);
                        const total = data.reduce((sum, item) => sum + item.value, 0);
                        let currentAngle = 0;

                        const svg = this.createSVG('chart-svg chart-pie', '0 0 280 280');
                        const [centerX, centerY, radius] = [140, 140, 100];
                        const tooltip = this.createTooltip(container);

                        data.forEach(segment => {
                            const angle = (segment.value / total) * 360;
                            const [startRad, endRad] = [(currentAngle - 90) * Math.PI / 180, (currentAngle + angle - 90) * Math.PI / 180];
                            const [x1, y1, x2, y2] = [centerX + radius * Math.cos(startRad), centerY + radius * Math.sin(startRad),
                            centerX + radius * Math.cos(endRad), centerY + radius * Math.sin(endRad)];

                            const path = this.createElement('path', {
                                d: `M ${centerX} ${centerY} L ${x1} ${y1} A ${radius} ${radius} 0 ${angle > 180 ? 1 : 0} 1 ${x2} ${y2} Z`,
                                fill: segment.color,
                                class: 'chart-data-element chart-segment'
                            });

                            this.addTooltipEvents(path, `${segment.label}: ${segment.value} (${Math.round((segment.value / total) * 100)}%)`, tooltip, container);
                            svg.appendChild(path);

                            const midAngle = currentAngle + angle / 2;
                            const [textX, textY] = [centerX + radius * 0.65 * Math.cos((midAngle - 90) * Math.PI / 180),
                            centerY + radius * 0.65 * Math.sin((midAngle - 90) * Math.PI / 180)];
                            const fontSize = angle < 30 ? '12px' : angle < 60 ? '14px' : '18px';

                            svg.appendChild(this.createElement('text', {
                                x: textX, y: textY, 'text-anchor': 'middle', 'dominant-baseline': 'middle',
                                fill: '#fff', 'font-weight': '700', 'font-size': fontSize,
                                class: 'chart-percentage-text', style: 'pointer-events:none'
                            }, `${Math.round((segment.value / total) * 100)}%`));

                            currentAngle += angle;
                        });

                        this.appendChart(container, svg);
                        this.createLegend(legend, data);
                    },
                    createBarChart() {
                        const container = document.getElementById('test-tag-distribution-chart');
                        const legend = document.getElementById('test-tag-distribution-legend');
                        const data = chartData.tagDistribution.filter(item => item.value > 0);
                        const maxValue = Math.max(...data.map(d => d.value));
                        const [baseBarWidth, barSpacing, chartHeight] = [60, 80, 350];
                        const calculatedWidth = Math.max(400, data.length * barSpacing + 120);

                        const svg = this.createSVG('chart-svg chart-bar', `0 0 ${calculatedWidth} ${chartHeight}`);
                        Object.assign(svg.style, { width: '100%', height: 'auto', minWidth: calculatedWidth + 'px' });
                        svg.setAttribute('preserveAspectRatio', 'xMidYMid meet');

                        const chartArea = { x: 80, y: 40, width: calculatedWidth - 120, height: chartHeight - 100 };
                        const tooltip = this.createTooltip(container);
                        const colors = ['var(--primary-color)', 'var(--success-color)', 'var(--warning-color)', 'var(--info-color)', 'var(--accent-color)', 'var(--secondary-color)', 'var(--danger-color)'];

                        for (let i = 0; i <= 5; i++) {
                            const y = chartArea.y + (chartArea.height / 5) * i;
                            const value = Math.round(maxValue - (maxValue / 5) * i);
                            svg.appendChild(this.createElement('line', {
                                x1: chartArea.x, y1: y, x2: chartArea.x + chartArea.width, y2: y, class: 'chart-grid-line'
                            }));
                            svg.appendChild(this.createElement('text', {
                                x: chartArea.x - 10, y: y + 4, 'text-anchor': 'end', class: 'chart-axis-label'
                            }, value));
                        }

                        data.forEach((item, index) => {
                            const barHeight = (item.value / maxValue) * chartArea.height;
                            const x = chartArea.x + index * barSpacing + (barSpacing - baseBarWidth) / 2;
                            const y = chartArea.y + chartArea.height - barHeight;

                            const rect = this.createElement('rect', {
                                x, y, width: baseBarWidth, height: barHeight,
                                fill: colors[index % colors.length], class: 'chart-data-element chart-bar-rect'
                            });

                            this.addTooltipEvents(rect, `${item.label}: ${item.value} tests`, tooltip, container);
                            svg.appendChild(rect);

                            svg.appendChild(this.createElement('text', {
                                x: x + baseBarWidth / 2, y: chartArea.y + chartArea.height + 20,
                                'text-anchor': 'middle', class: 'chart-axis-label'
                            }, item.label));

                            svg.appendChild(this.createElement('text', {
                                x: x + baseBarWidth / 2, y: y - 5, 'text-anchor': 'middle',
                                class: 'chart-axis-label', 'font-size': '12px', 'font-weight': '600'
                            }, item.value));
                        });

                        svg.appendChild(this.createElement('text', {
                            x: 20, y: chartArea.y + chartArea.height / 2, 'text-anchor': 'middle',
                            transform: `rotate(-90, 20, ${chartArea.y + chartArea.height / 2})`, class: 'chart-axis-label'
                        }, 'Test Count'));

                        svg.appendChild(this.createElement('text', {
                            x: chartArea.x + chartArea.width / 2, y: chartHeight - 10,
                            'text-anchor': 'middle', class: 'chart-axis-label'
                        }, 'Test Tags'));

                        this.appendChart(container, svg);
                        this.createLegend(legend, data.map((item, index) => ({ label: item.label, color: colors[index % colors.length] })));
                    },

                    createElement(tag, attrs = {}, text = '') {
                        const el = document.createElementNS('http://www.w3.org/2000/svg', tag);
                        Object.entries(attrs).forEach(([k, v]) => el.setAttribute(k, v));
                        if (text) el.textContent = text;
                        return el;
                    },

                    createSVG(className, viewBox) {
                        return this.createElement('svg', { class: className, viewBox });
                    },

                    createTooltip(container) {
                        const tooltip = document.createElement('div');
                        tooltip.className = 'chart-tooltip';
                        container.appendChild(tooltip);
                        return tooltip;
                    },

                    addTooltipEvents(element, content, tooltip, container) {
                        element.addEventListener('mouseenter', () => {
                            tooltip.innerHTML = content;
                            tooltip.classList.add('show');
                        });
                        element.addEventListener('mousemove', e => {
                            const rect = container.getBoundingClientRect();
                            tooltip.style.left = (e.clientX - rect.left + 10) + 'px';
                            tooltip.style.top = (e.clientY - rect.top - 10) + 'px';
                        });
                        element.addEventListener('mouseleave', () => tooltip.classList.remove('show'));
                    },

                    appendChart(container, svg) {
                        const chartContainer = document.createElement('div');
                        chartContainer.className = 'chart-container';
                        chartContainer.appendChild(svg);
                        container.appendChild(chartContainer);
                    },

                    createLegend(container, data) {
                        const legendContainer = document.createElement('div');
                        legendContainer.className = 'legend-container';
                        data.forEach(item => {
                            const legendItem = document.createElement('div');
                            legendItem.className = 'legend-item';
                            const colorBox = document.createElement('div');
                            colorBox.className = 'legend-color';
                            colorBox.style.backgroundColor = item.color;
                            const label = document.createElement('span');
                            label.textContent = item.label;
                            legendItem.appendChild(colorBox);
                            legendItem.appendChild(label);
                            legendContainer.appendChild(legendItem);
                        });
                        container.appendChild(legendContainer);
                    },
                    initializeChartDownloads() {
                        document.querySelectorAll('.card-download-btn').forEach(btn => {
                            btn.addEventListener('click', () => {
                                const chartType = btn.getAttribute('data-chart');
                                if (chartType) this.downloadChart(chartType);
                            });
                        });
                    },
                    downloadChart(chartType) {
                        const chartIdMap = { 'status-summary': 'test-status-summary-chart', 'tag-distribution': 'test-tag-distribution-chart' };
                        const chartId = chartIdMap[chartType];
                        if (!chartId) return this.showMessage('Unknown chart type for download', 'warning');

                        const chartElement = document.querySelector(`#${chartId} .chart-svg`);
                        if (!chartElement) return this.showMessage('Chart not found for download', 'warning');

                        try {
                            const downloadBtn = document.querySelector(`[data-chart="${chartType}"]`);
                            if (downloadBtn) {
                                downloadBtn._originalHTML = downloadBtn.innerHTML;
                                downloadBtn.innerHTML = '<span style="display:inline-block;animation:spin 1s linear infinite;">⟳</span>';
                                downloadBtn.disabled = true;
                            }

                            const svgClone = chartElement.cloneNode(true);
                            const viewBox = svgClone.getAttribute('viewBox');
                            let [width, height] = [800, 600];
                            if (viewBox) {
                                const [, , vbWidth, vbHeight] = viewBox.split(' ').map(Number);
                                [width, height] = [vbWidth || 800, vbHeight || 600];
                            }

                            ['xmlns', 'xmlns:xlink', 'width', 'height'].forEach((attr, i) =>
                                svgClone.setAttribute(attr, i < 2 ? 'http://www.w3.org/' + (i ? '1999/xlink' : '2000/svg') : [width, height][i - 2]));

                            const computedStyle = getComputedStyle(document.documentElement);
                            const cssVars = {
                                '--success-color': computedStyle.getPropertyValue('--success-color').trim() || '#4caf50',
                                '--danger-color': computedStyle.getPropertyValue('--danger-color').trim() || '#f44336',
                                '--warning-color': computedStyle.getPropertyValue('--warning-color').trim() || '#ff9800',
                                '--primary-color': computedStyle.getPropertyValue('--primary-color').trim() || '#2786d4',
                                '--secondary-color': computedStyle.getPropertyValue('--secondary-color').trim() || '#6c757d',
                                '--info-color': computedStyle.getPropertyValue('--info-color').trim() || '#17a2b8',
                                '--accent-color': computedStyle.getPropertyValue('--accent-color').trim() || '#e83e8c',
                                '--text-color': computedStyle.getPropertyValue('--text-color').trim() || '#495057',
                                '--text-muted': computedStyle.getPropertyValue('--text-muted').trim() || '#7b8ca0',
                                '--bg-color': computedStyle.getPropertyValue('--bg-color').trim() || '#ffffff',
                                '--border-color': computedStyle.getPropertyValue('--border-color').trim() || '#dee2e6'
                            };

                            let svgString = new XMLSerializer().serializeToString(svgClone);
                            Object.entries(cssVars).forEach(([varName, colorValue]) => {
                                if (colorValue) svgString = svgString.replace(new RegExp(`var\\(\\s*${varName.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')}\\s*\\)`, 'g'), colorValue);
                            });

                            const canvas = document.createElement('canvas');
                            const ctx = canvas.getContext('2d');
                            const scale = 2;
                            canvas.width = width * scale;
                            canvas.height = height * scale;
                            ctx.scale(scale, scale);
                            ctx.fillStyle = cssVars['--bg-color'] || '#ffffff';
                            ctx.fillRect(0, 0, width, height);

                            const img = new Image();
                            img.crossOrigin = 'anonymous';
                            const url = URL.createObjectURL(new Blob([svgString], { type: 'image/svg+xml;charset=utf-8' }));
                            const self = this;

                            const restoreBtn = () => downloadBtn && downloadBtn._originalHTML && (downloadBtn.innerHTML = downloadBtn._originalHTML, downloadBtn.disabled = false, delete downloadBtn._originalHTML);

                            img.onload = function () {
                                try {
                                    ctx.drawImage(img, 0, 0, width, height);
                                    const link = document.createElement('a');
                                    link.download = `${chartType}-chart-${new Date().toISOString().slice(0, 10)}.png`;
                                    link.href = canvas.toDataURL('image/png', 1.0);
                                    link.style.display = 'none';
                                    document.body.appendChild(link);
                                    link.click();
                                    document.body.removeChild(link);
                                    URL.revokeObjectURL(url);
                                    self.showMessage('Chart downloaded successfully!', 'success');
                                } catch (e) {
                                    self.showMessage('Failed to generate chart image', 'danger');
                                }
                                restoreBtn();
                            };

                            img.onerror = () => (URL.revokeObjectURL(url), self.showMessage('Failed to load chart for download', 'danger'), restoreBtn());
                            setTimeout(() => !img.complete && (img.src = '', URL.revokeObjectURL(url), self.showMessage('Chart download timed out', 'warning'), restoreBtn()), 10000);
                            img.src = url;

                        } catch (error) {
                            this.showMessage('Failed to download chart', 'danger');
                            const downloadBtn = document.querySelector(`[data-chart="${chartType}"]`);
                            if (downloadBtn && downloadBtn._originalHTML) {
                                downloadBtn.innerHTML = downloadBtn._originalHTML;
                                downloadBtn.disabled = false;
                                delete downloadBtn._originalHTML;
                            }
                        }
                    },

                    showMessage(message, type = 'info') {
                        if (typeof showToast === 'function') return showToast(message, type);
                        const toast = document.createElement('div');
                        toast.style.cssText = `position:fixed;top:20px;right:20px;background:${type === 'success' ? '#4caf50' : type === 'danger' ? '#f44336' : '#2196f3'};color:white;padding:12px 20px;border-radius:6px;z-index:10000;font-size:14px;box-shadow:0 4px 12px rgba(0,0,0,0.2);animation:slideInRight 0.3s ease`;
                        toast.textContent = message;
                        document.body.appendChild(toast);
                        setTimeout(() => {
                            toast.style.animation = 'slideOutRight 0.3s ease';
                            setTimeout(() => document.body.contains(toast) && document.body.removeChild(toast), 300);
                        }, 3000);
                    }
                };

                const UITesting = {
                    init() {
                        this.testListContainer = document.getElementById('test-list-container');
                        this.infoBody = document.getElementById('test-info-body');
                        this.logsBody = document.getElementById('test-logs-body');
                        this.searchInput = document.querySelector('.test-search-input');
                        this.testFilterBtn = document.getElementById('testFilterButton');
                        this.testFilterDropdown = document.getElementById('testFilterDropdown');
                        this.logsFilterBtn = document.getElementById('logsFilterButton');
                        this.logsFilterDropdown = document.getElementById('logsFilterDropdown');
                        this.infoAccordionBtn = document.getElementById('test-info-accordion-toggle');
                        this.infoAccordionIcon = document.getElementById('test-info-accordion-icon');
                        this.infoHeaderStatusBadge = document.querySelector('.test-info-section .status-badge');

                        this.exportBtn = document.getElementById('exportButton');

                        this.testCards = Array.from(this.testListContainer.querySelectorAll('.test-card'));
                        this.currentFilter = 'all';
                        this.currentSearch = '';
                        this.selectedTestId = null;
                        this.accordionState = {};

                        this.infoBody.classList.add('expanding');
                        this.infoBody.style.maxHeight = 'none';
                        this.infoAccordionIcon.style.transform = 'rotate(0deg)';

                        this.exportBtn.disabled = true;
                        this.exportBtn.style.opacity = '0.5';
                        this.exportBtn.style.cursor = 'not-allowed';

                        this.bindEvents();
                        this.updateTestList();
                        this.showDefaultPanels();
                    },

                    bindEvents() {
                        this.searchInput?.addEventListener('input', () => {
                            this.currentSearch = this.searchInput.value;
                            this.updateTestList();
                        });

                        this.testFilterDropdown?.addEventListener('click', e => {
                            const option = e.target.closest('.dropdown-option');
                            if (!option) return;

                            const activeOption = this.testFilterDropdown.querySelector('.active');
                            if (activeOption) {
                                activeOption.classList.remove('active');
                                if (activeOption.hasAttribute('aria-selected')) {
                                    activeOption.setAttribute('aria-selected', 'false');
                                }
                            }

                            option.classList.add('active');
                            if (option.hasAttribute('aria-selected')) {
                                option.setAttribute('aria-selected', 'true');
                            }

                            this.currentFilter = option.getAttribute('data-test-filter');

                            const badge = this.testFilterBtn.querySelector('.dropdown-badge');
                            badge.textContent = option.textContent.trim();
                            badge.setAttribute('test-status', this.currentFilter);

                            this.updateTestList();
                            this.testFilterDropdown.classList.remove('show');
                            this.testFilterBtn.setAttribute('aria-expanded', 'false');
                        });

                        this.testListContainer?.addEventListener('click', e => {
                            const card = e.target.closest('.test-card');
                            if (card && card.style.display !== 'none') {
                                this.selectTest(card.getAttribute('data-test-id'));
                            }
                        });

                        this.logsFilterDropdown?.addEventListener('click', e => {
                            const option = e.target.closest('.dropdown-option');
                            if (!option) return;

                            const activeOption = this.logsFilterDropdown.querySelector('.active');
                            if (activeOption) {
                                activeOption.classList.remove('active');
                                if (activeOption.hasAttribute('aria-selected')) {
                                    activeOption.setAttribute('aria-selected', 'false');
                                }
                            }

                            option.classList.add('active');
                            if (option.hasAttribute('aria-selected')) {
                                option.setAttribute('aria-selected', 'true');
                            }

                            const filter = option.getAttribute('data-log-filter');

                            const badge = this.logsFilterBtn.querySelector('.dropdown-badge');
                            badge.textContent = option.textContent.trim();
                            badge.setAttribute('log-status', filter);

                            this.filterLogs(filter);
                            this.logsFilterDropdown.classList.remove('show');
                            this.logsFilterBtn.setAttribute('aria-expanded', 'false');
                        });

                        this.logsBody?.addEventListener('click', e => {
                            const toggle = e.target.closest('.test-log-toggle');
                            const imageBtn = e.target.closest('button[data-modal="image"]:not(.disabled)');

                            if (toggle) {
                                const logItem = toggle.closest('.test-log-item');
                                logItem.classList.toggle('active');
                                this.updateLogAccordion(logItem);
                            }
                            if (imageBtn) {
                                MediaModal.openScreenshotModal({
                                    src: imageBtn.getAttribute('data-image-url'),
                                    title: imageBtn.getAttribute('data-log-id'),
                                    logId: imageBtn.getAttribute('data-log-id')
                                });
                            }
                        });

                        this.infoAccordionBtn?.addEventListener('click', () => {
                            const isExpanded = this.infoBody.classList.contains('expanding');
                            this.toggleInfoAccordion(!isExpanded);
                            if (this.selectedTestId) {
                                this.accordionState[this.selectedTestId] = !isExpanded;
                            }
                        });

                        this.testFilterBtn?.addEventListener('click', e => { e.stopPropagation(); this.toggleDropdown(this.testFilterDropdown); });
                        this.logsFilterBtn?.addEventListener('click', e => { e.stopPropagation(); this.toggleDropdown(this.logsFilterDropdown); });
                        document.addEventListener('click', () => this.closeAllDropdowns());

                        document.addEventListener('navigateToUITesting', e => {
                            this.navigateTo(e.detail.filter);
                        });

                        this.exportBtn?.addEventListener('click', () => {
                            if (!this.exportBtn.disabled && this.selectedTestId) {
                                this.exportTestData();
                            }
                        });
                    },

                    toggleDropdown(dropdown) {
                        const wasOpen = dropdown.classList.contains('show');
                        this.closeAllDropdowns();
                        if (!wasOpen) {
                            dropdown.classList.add('show');
                            if (dropdown === this.testFilterDropdown) {
                                this.testFilterBtn.setAttribute('aria-expanded', 'true');
                            } else if (dropdown === this.logsFilterDropdown) {
                                this.logsFilterBtn.setAttribute('aria-expanded', 'true');
                            }
                        }
                    },

                    closeAllDropdowns() {
                        this.testFilterDropdown?.classList.remove('show');
                        this.logsFilterDropdown?.classList.remove('show');
                        this.testFilterBtn?.setAttribute('aria-expanded', 'false');
                        this.logsFilterBtn?.setAttribute('aria-expanded', 'false');
                    },

                    navigateTo(filter) {
                        document.querySelector('.nav-item.active')?.classList.remove('active');
                        document.querySelector('.content-section.active')?.classList.remove('active');
                        document.querySelector('.nav-item[data-section="ui-testing"]').classList.add('active');
                        document.getElementById('ui-testing').classList.add('active');

                        const option = this.testFilterDropdown.querySelector(`[data-test-filter="${filter}"]`);
                        if (option) option.click();

                        showToast(`Showing ${filter} tests`, 'success');
                    },

                    updateTestList() {
                        let visibleCount = 0;
                        const searchLower = this.currentSearch.trim().toLowerCase();

                        this.testCards.forEach(card => {
                            const status = card.getAttribute('test-status');
                            const testId = card.getAttribute('data-test-id') || '';
                            const title = card.querySelector('.test-title')?.textContent || '';

                            const matchesFilter = (this.currentFilter === 'all' || status === this.currentFilter);
                            const matchesSearch = !searchLower || testId.toLowerCase().includes(searchLower) || title.toLowerCase().includes(searchLower);

                            if (matchesFilter && matchesSearch) {
                                card.style.display = '';
                                visibleCount++;
                            } else {
                                card.style.display = 'none';
                            }
                        });

                        this.testListContainer.querySelector('.message-container')?.remove();
                        if (this.testCards.length === 0) {
                            this.testListContainer.appendChild(createMessageContainer('¯\\_(ツ)_/¯', 'No Tests to Show'));
                        } else if (visibleCount === 0) {
                            this.testListContainer.appendChild(createMessageContainer('¯\\_(ツ)_/¯', 'No search results found for your query.'));
                        }
                    },

                    selectTest(testId) {
                        if (this.selectedTestId === testId) return;

                        this.selectedTestId = testId;

                        this.logsFilterBtn.disabled = false;

                        this.testCards.forEach(card => {
                            card.classList.toggle('active', card.getAttribute('data-test-id') === testId);
                            card.setAttribute('aria-selected', card.getAttribute('data-test-id') === testId);
                        });

                        this.displayTestDetails(testId);
                    },

                    displayTestDetails(testId) {
                        const loadingIcon = `<svg width="50" height="50"><use href="#icon-loading"></use></svg>`;

                        this.infoBody.innerHTML = '';
                        this.logsBody.innerHTML = '';
                        this.infoBody.appendChild(createMessageContainer(loadingIcon, 'Loading Test Information...'));
                        this.logsBody.appendChild(createMessageContainer(loadingIcon, 'Loading Test Logs...'));
                        this.updateLogCounts(null);

                        const startTime = Date.now();
                        const minLoadingTime = 200;

                        requestAnimationFrame(() => {
                            if (this.selectedTestId !== testId) return;

                            const data = testDataStore[testId];
                            if (data) {
                                this.renderTestInfo(data);
                                this.renderTestLogs(data);
                                this.enableExportButton();
                                
                                this.waitForContentReady(() => {
                                    const elapsedTime = Date.now() - startTime;
                                    const remainingTime = Math.max(0, minLoadingTime - elapsedTime);
                                    
                                    if (remainingTime > 0) {
                                        setTimeout(() => {
                                        }, remainingTime);
                                    }
                                });
                            } else {
                                this.showDefaultPanels('Could not find test data.');
                            }
                        });
                    },

                    waitForContentReady(callback) {
                        const checkContent = () => {
                            const infoLoading = this.infoBody.querySelector('.message-container') && 
                                              this.infoBody.querySelector('.message-container').textContent.includes('Loading Test Information');
                            const infoReady = !infoLoading && this.infoBody.innerHTML.trim() !== '';
                            
                            const logsLoading = this.logsBody.querySelector('.message-container') && 
                                              this.logsBody.querySelector('.message-container').textContent.includes('Loading Test Logs');
                            const logsReady = !logsLoading && this.logsBody.innerHTML.trim() !== '';
                            
                            if (infoReady && logsReady) {
                                callback();
                            } else {
                                requestAnimationFrame(checkContent);
                            }
                        };
                        
                        requestAnimationFrame(checkContent);
                    },

                    showDefaultPanels(errorMsg = null) {
                        this.infoBody.innerHTML = '';
                        this.logsBody.innerHTML = '';

                        const infoMsg = errorMsg || 'Click on a test to view information';
                        const logsMsg = errorMsg || 'Click on a test to view logs';

                        this.infoBody.appendChild(createMessageContainer('☕︎', infoMsg));
                        this.logsBody.appendChild(createMessageContainer('☕︎', logsMsg));

                        if (this.infoHeaderStatusBadge) {
                            this.infoHeaderStatusBadge.textContent = 'INFO';
                            this.infoHeaderStatusBadge.setAttribute('test-status', 'info');
                        }
                        this.updateLogCounts(null);
                        this.toggleInfoAccordion(true);

                        this.logsFilterBtn.disabled = true;
                        this.disableExportButton();
                    },

                    renderTestInfo(data) {
                        this.infoBody.innerHTML = `
                    <div class="test-info-grid">
                        <div class="test-info-grid-col"><div class="test-info-item"><div class="test-info-icon"><svg fill="currentColor"><use href="#icon-test-id"></use></svg></div><div class="test-info-content"><span class="test-info-label">Test ID</span><span class="test-info-value">${data.id}</span></div></div></div>
                        <div class="test-info-grid-col"><div class="test-info-item"><div class="test-info-icon"><svg fill="currentColor"><use href="#icon-duration"></use></svg></div><div class="test-info-content"><span class="test-info-label">Duration</span><span class="test-info-value">${data.duration}</span></div></div></div>
                        <div class="test-info-grid-col"><div class="test-info-item"><div class="test-info-icon"><svg fill="currentColor"><use href="#icon-tags"></use></svg></div><div class="test-info-content"><div class="test-info-tags-container"><span class="test-info-label-inline">Tags</span>${data.tags.map((tag, i) => `<div class="badge tag-${(i % 5) + 1}">${tag}</div>`).join('')}</div></div></div></div>
                                                </div>
                    <div class="test-info-row"><div class="test-info-item"><div class="test-info-icon"><svg fill="currentColor"><use href="#icon-test-name"></use></svg></div><div class="test-info-content"><span class="test-info-label">Test Name</span><span class="test-info-value test-info-ellipsis">${data.name}</span></div></div></div>
                    <div class="test-info-row"><div class="test-info-item"><div class="test-info-icon"><svg fill="currentColor"><use href="#icon-description"></use></svg></div><div class="test-info-content"><span class="test-info-label">Description</span><span class="test-info-value test-info-ellipsis">${data.description}</span></div></div></div>`;

                        if (this.infoHeaderStatusBadge) {
                            this.infoHeaderStatusBadge.textContent = data.status.toUpperCase();
                            this.infoHeaderStatusBadge.setAttribute('test-status', data.status);
                        }

                        this.toggleInfoAccordion(this.accordionState[data.id] !== false);
                    },

                    toggleInfoAccordion(expand) {
                        const isCurrentlyExpanded = this.infoBody.classList.contains('expanding');
                        if (expand === isCurrentlyExpanded) return;

                        this.infoBody.classList.toggle('expanding', expand);
                        this.infoAccordionBtn.setAttribute('aria-expanded', expand);
                        this.infoAccordionIcon.style.transform = expand ? 'rotate(0deg)' : 'rotate(-180deg)';

                        if (expand) {
                            this.infoBody.style.maxHeight = '0px';
                            this.infoBody.offsetHeight;
                            this.infoBody.style.maxHeight = `${this.infoBody.scrollHeight}px`;

                            setTimeout(() => {
                                if (this.infoBody.classList.contains('expanding')) {
                                    this.infoBody.style.maxHeight = 'none';
                                }
                            }, 400);
                        } else {
                            this.infoBody.style.maxHeight = `${this.infoBody.scrollHeight}px`;
                            this.infoBody.offsetHeight;
                            this.infoBody.style.maxHeight = '0px';
                        }
                    },

                    renderTestLogs(data) {
                        if (!data.logs || data.logs.length === 0) {
                            this.logsBody.innerHTML = '';
                            this.logsBody.appendChild(createMessageContainer('¯\\_(ツ)_/¯', 'No logs to display'));
                            this.updateLogCounts(null);
                            this.logsFilterBtn.disabled = true;
                            this.logsFilterBtn.style.opacity = '0.5';
                            this.logsFilterBtn.style.cursor = 'not-allowed';
                            return;
                        }

                        this.logsFilterBtn.disabled = false;
                        this.logsFilterBtn.style.opacity = '1';
                        this.logsFilterBtn.style.cursor = 'pointer';

                        this.logsBody.innerHTML = data.logs.map(log => `
                    <div class="test-log-item" log-status="${log.status}" data-log-id="${log.id}">
                        <div class="test-log-header">
                            <div class="test-log-status"></div>
                            <div class="test-log-id">Log #${log.id}</div>
                            <div class="test-log-name">${log.name}</div>
                            <div class="test-log-time"><svg fill="currentColor"><use href="#icon-clock"></use></svg>${log.time}</div>
                            <div class="test-log-actions">
                                <button class="test-log-btn ${!log.screenshot ? 'disabled' : ''}" data-modal="image" data-log-id="Log #${log.id}" data-image-url="${log.screenshot || ''}" aria-label="View screenshot">
                                    <svg fill="currentColor"><use href="#icon-image"></use></svg>
                                </button>
                                <button class="test-log-btn test-log-toggle" aria-label="Toggle details"><svg fill="currentColor"><use href="#icon-chevron-down"></use></svg></button>
                                            </div>
                                                </div>
                        <div class="test-log-content">
                            <div class="test-log-time-column">${log.time}</div>
                            <div class="test-log-message-column"><p>${log.message}</p></div>
                                                </div>
                    </div>`).join('');

                        const currentFilter = this.logsFilterDropdown.querySelector('.active')?.getAttribute('data-log-filter') || 'all';
                        this.filterLogs(currentFilter);
                    },

                    updateLogAccordion(logItem) {
                        const content = logItem.querySelector('.test-log-content');
                        if (logItem.classList.contains('active')) {
                            content.style.maxHeight = content.scrollHeight + 'px';
                        } else {
                            content.style.maxHeight = '0px';
                        }
                    },

                    filterLogs(status) {
                        const logItems = this.logsBody.querySelectorAll('.test-log-item');
                        let visibleCount = 0;

                        logItems.forEach(item => {
                            const logStatus = item.getAttribute('log-status');
                            const isVisible = (status === 'all' || logStatus === status);
                            item.style.display = isVisible ? '' : 'none';
                            if (isVisible) visibleCount++;
                        });

                        this.logsBody.querySelector('.message-container')?.remove();
                        if (visibleCount === 0 && logItems.length > 0) {
                            this.logsBody.appendChild(createMessageContainer('¯\\_(ツ)_/¯', `No logs to show for filter: ${status}`));
                        }

                        this.updateLogCounts(logItems);
                    },

                    updateLogCounts(logItems) {
                        const counts = { total: 0, pass: 0, fail: 0, skip: 0, info: 0 };
                        if (logItems) {
                            logItems.forEach(item => {
                                const status = item.getAttribute('log-status');
                                if (counts.hasOwnProperty(status)) counts[status]++;
                                counts.total++;
                            });
                        }
                        for (const status in counts) {
                            document.getElementById(`${status}-logs-count`).textContent = counts[status];
                        }
                        
                        const failBadge = document.getElementById('fail-logs-count');
                        if (counts.fail > 0) {
                            failBadge.classList.add('badge-pulse-active');
                        } else {
                            failBadge.classList.remove('badge-pulse-active');
                        }
                    },

                    enableExportButton() {
                        this.exportBtn.disabled = false;
                        this.exportBtn.style.opacity = '1';
                        this.exportBtn.style.cursor = 'pointer';
                    },

                    disableExportButton() {
                        this.exportBtn.disabled = true;
                        this.exportBtn.style.opacity = '0.5';
                        this.exportBtn.style.cursor = 'not-allowed';
                    },

                    exportTestData() {
                        if (!this.selectedTestId) {
                            showToast('No test selected for export', 'warning');
                            return;
                        }

                        const testData = testDataStore[this.selectedTestId];
                        if (!testData) {
                            showToast('Test data not found', 'error');
                            return;
                        }

                        const now = new Date();
                        const options = {
                            day: '2-digit',
                            month: 'short',
                            year: 'numeric',
                            hour: '2-digit',
                            minute: '2-digit',
                            hour12: true
                        };
                        const dateTimeStr = now.toLocaleDateString('en-GB', options)
                            .replace(/,/g, '')
                            .replace(/\./g, '')
                            .toUpperCase();

                        const filename = `${testData.id}_${testData.status}_${dateTimeStr}.csv`;

                        const formatDate = (dateStr) => {
                            try {
                                const date = new Date(dateStr);
                                const options = { day: '2-digit', month: 'long', year: 'numeric' };
                                return date.toLocaleDateString('en-GB', options);
                            } catch (e) {
                                return dateStr;
                            }
                        };

                        let csvContent = '';

                        csvContent += 'TEST INFORMATION\n';
                        csvContent += '================\n';
                        csvContent += `Test ID,${testData.id}\n`;
                        csvContent += `Test Name,"${testData.name}"\n`;
                        csvContent += `Status,${testData.status}\n`;
                        csvContent += `Duration,${testData.duration}\n`;
                        csvContent += `Date,${formatDate(testData.date)}\n`;
                        csvContent += `Time,${testData.time}\n`;
                        csvContent += `Description,"${testData.description}"\n`;
                        csvContent += `Tags,"${testData.tags.join(', ')}"\n`;
                        csvContent += '\n';

                        csvContent += 'TEST LOGS\n';
                        csvContent += '=========\n';
                        csvContent += 'Log ID,Status,Name,Time,Message\n';

                        testData.logs.forEach(log => {
                            const escapedMessage = log.message.replace(/"/g, '""');
                            const escapedName = log.name.replace(/"/g, '""');

                            csvContent += `${log.id},${log.status},"${escapedName}",${log.time},"${escapedMessage}"\n`;
                        });

                        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                        const link = document.createElement('a');

                        if (link.download !== undefined) {
                            const url = URL.createObjectURL(blob);
                            link.setAttribute('href', url);
                            link.setAttribute('download', filename);
                            link.style.visibility = 'hidden';
                            document.body.appendChild(link);
                            link.click();
                            document.body.removeChild(link);
                            URL.revokeObjectURL(url);

                            showToast(`Test data exported as ${filename}`, 'success');
                        } else {
                            showToast('Export not supported in this browser', 'error');
                        }
                    }
                };

                const MediaModal = {
                    modal: null, modalTitle: null, modalBody: null, modalImage: null, zoomWrapper: null,
                    annotationCanvas: null, annotationTools: null, annotateBtn: null, ctx: null,
                    loadingContainer: null, imageContainer: null, errorContainer: null, progressText: null,

                    currentZoom: 1, MIN_ZOOM: 0.5, MAX_ZOOM: 5, ZOOM_STEP: 0.25,
                    isAnnotating: false, isPanning: false, isDrawing: false,
                    lastPanX: 0, lastPanY: 0, translateX: 0, translateY: 0, startX: 0, startY: 0,
                    currentLogId: '', currentShape: 'rectangle', currentColor: '#FF0000',
                    drawnShapes: [], undoStack: [], canvasSnapshot: null, currentBlobUrl: null,

                    init() {
                        this.modal = document.getElementById('mediaModal');
                        this.modalTitle = this.modal.querySelector('.media-modal-title h5');
                        this.modalBody = this.modal.querySelector('.media-modal-body');
                        this.modalImage = document.getElementById('modalImage');
                        this.zoomWrapper = document.getElementById('mediaZoomWrapper');
                        this.annotationCanvas = document.getElementById('annotationCanvas');
                        this.annotationTools = document.getElementById('annotationTools');
                        this.annotateBtn = document.getElementById('annotateBtn');
                        this.loadingContainer = document.getElementById('loadingContainer');
                        this.imageContainer = document.getElementById('imageContainer');
                        this.errorContainer = document.getElementById('mediaErrorMessage');
                        this.ctx = this.annotationCanvas.getContext('2d');
                        this.progressText = this.loadingContainer.querySelector('.loading-text');

                        this.bindEvents();
                    },

                    bindEvents() {
                        this.modal.querySelector('.media-modal-close').addEventListener('click', () => this.closeModal());
                        this.modal.addEventListener('click', e => { if (e.target === this.modal) this.closeModal(); });

                        document.getElementById('zoomIn').addEventListener('click', () => this.zoom(this.ZOOM_STEP));
                        document.getElementById('zoomOut').addEventListener('click', () => this.zoom(-this.ZOOM_STEP));
                        document.getElementById('reset').addEventListener('click', () => this.resetAll());
                        document.getElementById('downloadBtn').addEventListener('click', () => this.downloadImage());
                        this.annotateBtn.addEventListener('click', () => this.toggleAnnotationMode());

                        this.annotationTools.addEventListener('click', e => {
                            const colorOption = e.target.closest('.color-option');
                            if (colorOption) {
                                this.annotationTools.querySelector('.color-option.active')?.classList.remove('active');
                                this.annotationTools.querySelector('.color-option.active')?.setAttribute('aria-pressed', 'false');
                                colorOption.classList.add('active');
                                colorOption.setAttribute('aria-pressed', 'true');
                                this.currentColor = colorOption.getAttribute('data-color');
                            }
                            const shapeBtn = e.target.closest('.shape-btn[data-shape]');
                            if (shapeBtn) {
                                this.annotationTools.querySelector('.shape-btn.active')?.classList.remove('active');
                                this.annotationTools.querySelector('.shape-btn.active')?.setAttribute('aria-pressed', 'false');
                                shapeBtn.classList.add('active');
                                shapeBtn.setAttribute('aria-pressed', 'true');
                                this.currentShape = shapeBtn.getAttribute('data-shape');
                            }
                            if (e.target.closest('#undoBtn')) this.undo();
                            if (e.target.closest('#redoBtn')) this.redo();
                            if (e.target.closest('#clearAnnotations')) {
                                this.drawnShapes = [];
                                this.undoStack = [];
                                this.redrawCanvas();
                            }
                        });

                        document.addEventListener('keydown', e => this.handleKeyboardShortcuts(e));
                        this.setupPanningEvents();
                        this.setupCanvasEvents();

                        if (window.ResizeObserver) {
                            new ResizeObserver(() => {
                                if (this.modal.style.display === 'block') this.syncCanvasToImage();
                            }).observe(this.modalImage);
                        }
                    },

                    openScreenshotModal({ src, title = 'Screenshot', logId = '' }) {
                        if (!src) {
                            showToast('No image available for this log entry.', 'warning');
                            return;
                        }

                        this.modal.style.display = 'block';
                        this.modalTitle.textContent = title;
                        this.currentLogId = logId;
                        this.resetAll();

                        this.showLoadingState(true, 'Loading... 0%');

                        const xhr = new XMLHttpRequest();
                        xhr.open('GET', src, true);
                        xhr.responseType = 'blob';

                        xhr.onprogress = e => {
                            if (e.lengthComputable) {
                                const percentComplete = Math.round((e.loaded / e.total) * 100);
                                this.progressText.textContent = `Loading... ${percentComplete}%`;
                            }
                        };

                        xhr.onload = () => {
                            if (xhr.status === 200) {
                                this.currentBlobUrl = URL.createObjectURL(xhr.response);
                                this.modalImage.onload = () => {
                                    this.showLoadingState(false);
                                    this.imageContainer.style.display = 'flex';
                                    this.syncCanvasToImage();
                                    URL.revokeObjectURL(this.currentBlobUrl);
                                    this.currentBlobUrl = null;
                                };
                                this.modalImage.onerror = () => this.displayError('Could not render the downloaded image.');
                                this.modalImage.src = this.currentBlobUrl;
                            } else {
                                this.displayError(`Failed to load image (HTTP ${xhr.status})`);
                            }
                        };
                        xhr.onerror = () => this.displayError('Failed to load image due to a network error.');
                        xhr.send();
                    },

                    showLoadingState(isLoading, text = 'Loading media...') {
                        this.imageContainer.style.display = 'none';
                        this.errorContainer.style.display = 'none';
                        this.loadingContainer.style.display = isLoading ? 'flex' : 'none';
                        this.progressText.textContent = text;
                    },

                    displayError(message) {
                        this.showLoadingState(false);
                        this.errorContainer.innerHTML = '';
                        this.errorContainer.appendChild(createMessageContainer('⚠️', message));
                        this.errorContainer.style.display = 'flex';
                    },

                    closeModal() {
                        this.modal.style.display = 'none';
                        this.disableAnnotationMode();
                    },

                    resetAll() {
                        this.currentZoom = 1; this.translateX = 0; this.translateY = 0;
                        this.updateTransform();
                        this.drawnShapes = []; this.undoStack = [];
                        this.redrawCanvas();
                    },

                    zoom(delta) { this.currentZoom = Math.max(this.MIN_ZOOM, Math.min(this.MAX_ZOOM, this.currentZoom + delta)); this.updateTransform(); },
                    updateTransform() { this.zoomWrapper.style.transform = `translate(${this.translateX}px, ${this.translateY}px) scale(${this.currentZoom})`; },
                    toggleAnnotationMode() {
                        this.isAnnotating = !this.isAnnotating;
                        this.annotateBtn.classList.toggle('active', this.isAnnotating);
                        this.annotateBtn.setAttribute('aria-pressed', this.isAnnotating);
                        this.annotationTools.style.display = this.isAnnotating ? 'flex' : 'none';
                        this.annotationCanvas.style.pointerEvents = this.isAnnotating ? 'auto' : 'none';
                        this.imageContainer.style.cursor = this.isAnnotating ? 'crosshair' : (this.currentZoom > 1 ? 'grab' : 'default');
                    },
                    disableAnnotationMode() { if (this.isAnnotating) this.toggleAnnotationMode(); },
                    async downloadImage() { const downloadBtn = document.getElementById('downloadBtn'), iconSpan = downloadBtn.querySelector('.download-btn-icon'), loadingSpan = downloadBtn.querySelector('.download-btn-loading'); iconSpan.style.display = 'none'; loadingSpan.style.display = 'inline-block'; try { const tempCanvas = document.createElement('canvas'); tempCanvas.width = this.modalImage.naturalWidth; tempCanvas.height = this.modalImage.naturalHeight; const tempCtx = tempCanvas.getContext('2d'); tempCtx.drawImage(this.modalImage, 0, 0); tempCtx.drawImage(this.annotationCanvas, 0, 0); const link = document.createElement('a'); showToast('Screenshot download started!', 'success'); let testId = document.querySelector('.test-card.active')?.getAttribute('data-test-id') || 'Test'; let logId = this.currentLogId.replace(/[^a-zA-Z0-9_-]/g, '') || 'Log'; link.download = `${testId}_${logId}_Screenshot.png`; link.href = tempCanvas.toDataURL('image/png'); link.click(); } catch (err) { showToast('Failed to prepare image for download.', 'danger'); } finally { iconSpan.style.display = 'inline-block'; loadingSpan.style.display = 'none'; } },

                    setupPanningEvents() { this.imageContainer.addEventListener('mousedown', e => { if (e.button !== 0 || this.isAnnotating || this.currentZoom <= 1) return; this.isPanning = true; this.lastPanX = e.clientX; this.lastPanY = e.clientY; this.imageContainer.style.cursor = 'grabbing'; }); document.addEventListener('mousemove', e => { if (!this.isPanning) return; this.translateX += e.clientX - this.lastPanX; this.translateY += e.clientY - this.lastPanY; this.lastPanX = e.clientX; this.lastPanY = e.clientY; this.updateTransform(); }); document.addEventListener('mouseup', () => { if (this.isPanning) { this.isPanning = false; this.imageContainer.style.cursor = 'grab'; } }); },
                    setupCanvasEvents() { const getCoords = (e) => ({ x: (e.clientX - this.annotationCanvas.getBoundingClientRect().left) * (this.annotationCanvas.width / this.annotationCanvas.getBoundingClientRect().width), y: (e.clientY - this.annotationCanvas.getBoundingClientRect().top) * (this.annotationCanvas.height / this.annotationCanvas.getBoundingClientRect().height) }); this.annotationCanvas.addEventListener('mousedown', e => { if (e.button !== 0 || !this.isAnnotating) return; const { x, y } = getCoords(e); this.startX = x; this.startY = y; this.isDrawing = true; this.undoStack = []; this.canvasSnapshot = this.ctx.getImageData(0, 0, this.annotationCanvas.width, this.annotationCanvas.height); }); this.annotationCanvas.addEventListener('mousemove', e => { if (!this.isDrawing) return; const { x, y } = getCoords(e); if (this.canvasSnapshot) this.ctx.putImageData(this.canvasSnapshot, 0, 0); this.drawShape(this.startX, this.startY, x, y, false); }); this.annotationCanvas.addEventListener('mouseup', e => { if (!this.isDrawing) return; const { x, y } = getCoords(e); this.isDrawing = false; this.drawShape(this.startX, this.startY, x, y, true); }); },
                    handleKeyboardShortcuts(e) { if (this.modal.style.display !== 'block' || /TEXTAREA|INPUT/.test(e.target.tagName)) return; const actions = { 'Escape': () => this.closeModal(), '+': () => this.zoom(this.ZOOM_STEP), '=': () => this.zoom(this.ZOOM_STEP), '-': () => this.zoom(-this.ZOOM_STEP), }; if (e.shiftKey) { Object.assign(actions, { 'A': () => this.toggleAnnotationMode(), 'D': () => this.downloadImage(), 'R': () => this.resetAll(), }); } if ((e.ctrlKey || e.metaKey) && this.isAnnotating) { Object.assign(actions, { 'z': () => this.undo(), 'y': () => this.redo(), }); } if (actions[e.key]) { e.preventDefault(); actions[e.key](); } },
                    syncCanvasToImage() { const rect = this.modalImage.getBoundingClientRect(); this.annotationCanvas.width = this.modalImage.naturalWidth; this.annotationCanvas.height = this.modalImage.naturalHeight; this.redrawCanvas(); },
                    drawShape(fromX, fromY, toX, toY, isFinal) { const shapeProps = { type: this.currentShape, color: this.currentColor, lineWidth: 3 }; this.ctx.strokeStyle = shapeProps.color; this.ctx.lineWidth = shapeProps.lineWidth; this.ctx.fillStyle = shapeProps.color; switch (this.currentShape) { case 'rectangle': Object.assign(shapeProps, { x: Math.min(fromX, toX), y: Math.min(fromY, toY), width: Math.abs(toX - fromX), height: Math.abs(toY - fromY) }); this.ctx.strokeRect(shapeProps.x, shapeProps.y, shapeProps.width, shapeProps.height); break; case 'circle': Object.assign(shapeProps, { cx: fromX, cy: fromY, radius: Math.sqrt(Math.pow(toX - fromX, 2) + Math.pow(toY - fromY, 2)) }); this.ctx.beginPath(); this.ctx.arc(shapeProps.cx, shapeProps.cy, shapeProps.radius, 0, 2 * Math.PI); this.ctx.stroke(); break; case 'line': Object.assign(shapeProps, { fromX, fromY, toX, toY }); this.ctx.beginPath(); this.ctx.moveTo(fromX, fromY); this.ctx.lineTo(toX, toY); this.ctx.stroke(); break; case 'arrow': Object.assign(shapeProps, { fromX, fromY, toX, toY }); this.drawArrow(this.ctx, fromX, fromY, toX, toY, shapeProps.color); break; } if (isFinal) this.drawnShapes.push(shapeProps); },
                    drawArrow(context, fromX, fromY, toX, toY, color) { const headLength = 15; const angle = Math.atan2(toY - fromY, toX - fromX); context.beginPath(); context.moveTo(fromX, fromY); context.lineTo(toX, toY); context.strokeStyle = color; context.stroke(); context.beginPath(); context.moveTo(toX, toY); context.lineTo(toX - headLength * Math.cos(angle - Math.PI / 6), toY - headLength * Math.sin(angle - Math.PI / 6)); context.moveTo(toX, toY); context.lineTo(toX - headLength * Math.cos(angle + Math.PI / 6), toY - headLength * Math.sin(angle + Math.PI / 6)); context.stroke(); },
                    redrawCanvas() { this.ctx.clearRect(0, 0, this.annotationCanvas.width, this.annotationCanvas.height); this.drawnShapes.forEach(shape => { this.ctx.strokeStyle = shape.color; this.ctx.lineWidth = shape.lineWidth; this.ctx.fillStyle = shape.color; switch (shape.type) { case 'rectangle': this.ctx.strokeRect(shape.x, shape.y, shape.width, shape.height); break; case 'circle': this.ctx.beginPath(); this.ctx.arc(shape.cx, shape.cy, shape.radius, 0, 2 * Math.PI); this.ctx.stroke(); break; case 'line': this.ctx.beginPath(); this.ctx.moveTo(shape.fromX, shape.fromY); this.ctx.lineTo(shape.toX, shape.toY); this.ctx.stroke(); break; case 'arrow': this.drawArrow(this.ctx, shape.fromX, shape.fromY, shape.toX, shape.toY, shape.color); break; } }); },
                    undo() { if (this.drawnShapes.length > 0) { this.undoStack.push(this.drawnShapes.pop()); this.redrawCanvas(); } },
                    redo() { if (this.undoStack.length > 0) { this.drawnShapes.push(this.undoStack.pop()); this.redrawCanvas(); } }
                };

                const MetaCardAccent = {
                    cards: [],
                    init() {
                        this.cards = Array.from(document.querySelectorAll('.dashboard-meta-cards .card'));
                        if (this.cards.length === 0) return;
                        this.applyAccents();
                        document.addEventListener('themeChanged', () => this.applyAccents());
                    },
                    applyAccents() {
                        const isDark = document.body.getAttribute('data-theme') === 'dark';
                        this.cards.forEach(card => {
                            const gradient = this.generateGradient(isDark);
                            card.style.setProperty('--meta-accent-gradient', gradient);
                        });
                    },
                    generateGradient(isDark) {
                        const baseHue = Math.floor(Math.random() * 360);
                        const offset = 24 + Math.floor(Math.random() * 24);
                        const hue2 = (baseHue + offset) % 360;
                        const sat = isDark ? 75 : 80;
                        const light1 = isDark ? 60 : 55;
                        const light2 = isDark ? 50 : 45;
                        const a1 = isDark ? 0.95 : 1;
                        const a2 = isDark ? 0.95 : 1;
                        return `linear-gradient(180deg, hsla(${baseHue}, ${sat}%, ${light1}%, ${a1}) 0%, hsla(${hue2}, ${sat}%, ${light2}%, ${a2}) 100%)`;
                    }
                };

                const App = {
                    init() {
                        ThemeManager.init();
                        Navigation.init();
                        Dashboard.init();
                        UITesting.init();
                        MediaModal.init();
                        MetaCardAccent.init();

                        document.querySelector('button[data-tooltip="Reload"]')?.addEventListener('click', () => {
                            showToast('Refreshing data...', 'info');
                            setTimeout(() => window.location.reload(), 500);
                        });

                        const rLogo = document.getElementById('r-logo');
                        if (rLogo?.animate) {
                            rLogo.animate([{ opacity: 0, transform: 'translateY(16px)' }, { opacity: 1, transform: 'translateY(0)' }],
                                { duration: 900, fill: 'forwards', easing: 'cubic-bezier(.6,0,.4,1)' });
                        }
                    }
                };

                App.init();

            })();
        });
    </script>

</body>

</html>
